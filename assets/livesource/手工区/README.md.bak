ğŸ“º ç›´æ’­æºèšåˆå¤„ç†å·¥å…· v2.00 - è¯¦ç»†ç»´æŠ¤æ‰‹å†Œ

ğŸ“‹ é¡¹ç›®æ¦‚è¿°

é¡¹ç›®åç§°: LiveSource-Collector ä¼˜åŒ–ç‰ˆ
ç‰ˆæœ¬: v2.00
ä½œè€…: æ½‡ç„¶
ç»´æŠ¤æ—¥æœŸ: 2025-01-01

æœ¬æ–‡æ¡£è¯¦ç»†è¯´æ˜è„šæœ¬çš„æ‰€æœ‰æ–‡ä»¶æ ¼å¼ã€å¤„ç†é€»è¾‘ã€åˆ†ç±»ç®¡ç†å’Œé…ç½®æ–¹æ³•ã€‚

---

ğŸ“‚ ä¸€ã€é¡¹ç›®ç›®å½•ç»“æ„è¯¦è§£

1.1 æ ¸å¿ƒç›®å½•ç»“æ„ (assets/livesource/)

```
assets/livesource/
â”œâ”€â”€ ğŸ“ ä¸»é¢‘é“/                     # ä¸“ä¸šé¢‘é“åˆ†ç±»å­—å…¸
â”‚   â”œâ”€â”€ ğŸ“„ CCTV.txt               # å¤®è§†é¢‘é“å­—å…¸ (ç”¨äºæ’åº)
â”‚   â”œâ”€â”€ ğŸ“„ å«è§†.txt                # å«è§†é¢‘é“å­—å…¸ (ç”¨äºåŒ¹é…+æ’åº)
â”‚   â”œâ”€â”€ ğŸ“„ æ•°å­—.txt                # æ•°å­—é¢‘é“å­—å…¸
â”‚   â”œâ”€â”€ ğŸ“„ ç”µå½±.txt                # ç”µå½±é¢‘é“å­—å…¸
â”‚   â”œâ”€â”€ ğŸ“„ ç”µè§†å‰§.txt              # ç”µè§†å‰§é¢‘é“å­—å…¸
â”‚   â”œâ”€â”€ ğŸ“„ çºªå½•ç‰‡.txt              # çºªå½•ç‰‡é¢‘é“å­—å…¸
â”‚   â”œâ”€â”€ ğŸ“„ åŠ¨ç”»ç‰‡.txt              # åŠ¨ç”»ç‰‡é¢‘é“å­—å…¸
â”‚   â”œâ”€â”€ ğŸ“„ æ”¶éŸ³æœº.txt              # æ”¶éŸ³æœºé¢‘é“å­—å…¸
â”‚   â”œâ”€â”€ ğŸ“„ ç»¼è‰º.txt                # ç»¼è‰ºé¢‘é“å­—å…¸
â”‚   â”œâ”€â”€ ğŸ“„ è™ç‰™.txt                # è™ç‰™ç›´æ’­å­—å…¸
â”‚   â”œâ”€â”€ ğŸ“„ æ–—é±¼.txt                # æ–—é±¼ç›´æ’­å­—å…¸
â”‚   â”œâ”€â”€ ğŸ“„ è§£è¯´.txt                # è§£è¯´é¢‘é“å­—å…¸
â”‚   â”œâ”€â”€ ğŸ“„ éŸ³ä¹.txt                # éŸ³ä¹é¢‘é“å­—å…¸
â”‚   â”œâ”€â”€ ğŸ“„ ç¾é£Ÿ.txt                # ç¾é£Ÿé¢‘é“å­—å…¸
â”‚   â”œâ”€â”€ ğŸ“„ æ—…æ¸¸.txt                # æ—…æ¸¸é¢‘é“å­—å…¸
â”‚   â”œâ”€â”€ ğŸ“„ å¥åº·.txt                # å¥åº·é¢‘é“å­—å…¸
â”‚   â”œâ”€â”€ ğŸ“„ è´¢ç».txt                # è´¢ç»é¢‘é“å­—å…¸
â”‚   â”œâ”€â”€ ğŸ“„ è´­ç‰©.txt                # è´­ç‰©é¢‘é“å­—å…¸
â”‚   â”œâ”€â”€ ğŸ“„ æ¸¸æˆ.txt                # æ¸¸æˆé¢‘é“å­—å…¸
â”‚   â”œâ”€â”€ ğŸ“„ æ–°é—».txt                # æ–°é—»é¢‘é“å­—å…¸
â”‚   â”œâ”€â”€ ğŸ“„ ä¸­å›½.txt                # ä¸­å›½é¢‘é“å­—å…¸
â”‚   â”œâ”€â”€ ğŸ“„ å›½é™….txt                # å›½é™…é¢‘é“å­—å…¸
â”‚   â”œâ”€â”€ ğŸ“„ ä½“è‚².txt                # ä½“è‚²é¢‘é“å­—å…¸ (ç”¨äºåŒ¹é…+æ’åº)
â”‚   â”œâ”€â”€ ğŸ“„ ä½“è‚²èµ›äº‹.txt            # ä½“è‚²èµ›äº‹å…³é”®è¯å­—å…¸ (ç”¨äºæ¨¡ç³ŠåŒ¹é…)
â”‚   â”œâ”€â”€ ğŸ“„ å’ªå’•èµ›äº‹.txt            # å’ªå’•èµ›äº‹å…³é”®è¯å­—å…¸ (ç”¨äºæ¨¡ç³ŠåŒ¹é…)
â”‚   â”œâ”€â”€ ğŸ“„ æˆæ›²é¢‘é“.txt            # æˆæ›²é¢‘é“å­—å…¸
â”‚   â”œâ”€â”€ ğŸ“„ å†å±Šæ˜¥æ™š.txt            # æ˜¥æ™šé¢‘é“å­—å…¸
â”‚   â”œâ”€â”€ ğŸ“„ ç›´æ’­ä¸­å›½.txt            # æ™¯åŒºç›´æ’­å­—å…¸
â”‚   â””â”€â”€ ğŸ“„ æ”¶è—é¢‘é“.txt            # æ”¶è—é¢‘é“å­—å…¸æ•°å­—.txt
â”‚
â”œâ”€â”€ ğŸ“ åœ°æ–¹å°/                     # åœ°æ–¹å°åˆ†ç±»å­—å…¸
â”‚   â”œâ”€â”€ ğŸ“„ åŒ—äº¬.txt                # åŒ—äº¬é¢‘é“å­—å…¸
â”‚   â”œâ”€â”€ ğŸ“„ ä¸Šæµ·.txt                # ä¸Šæµ·é¢‘é“å­—å…¸
â”‚   â”œâ”€â”€ ğŸ“„ å¹¿ä¸œ.txt                # å¹¿ä¸œé¢‘é“å­—å…¸
â”‚   â”œâ”€â”€ ğŸ“„ æ±Ÿè‹.txt                # æ±Ÿè‹é¢‘é“å­—å…¸
â”‚   â”œâ”€â”€ ğŸ“„ æµ™æ±Ÿ.txt                # æµ™æ±Ÿé¢‘é“å­—å…¸
â”‚   â”œâ”€â”€ ğŸ“„ å±±ä¸œ.txt                # å±±ä¸œé¢‘é“å­—å…¸
â”‚   â”œâ”€â”€ ğŸ“„ å››å·.txt                # å››å·é¢‘é“å­—å…¸
â”‚   â”œâ”€â”€ ğŸ“„ æ²³å—.txt                # æ²³å—é¢‘é“å­—å…¸
â”‚   â”œâ”€â”€ ğŸ“„ æ¹–å—.txt                # æ¹–å—é¢‘é“å­—å…¸
â”‚   â”œâ”€â”€ ğŸ“„ é‡åº†.txt                # é‡åº†é¢‘é“å­—å…¸
â”‚   â”œâ”€â”€ ğŸ“„ å¤©æ´¥.txt                # å¤©æ´¥é¢‘é“å­—å…¸
â”‚   â”œâ”€â”€ ğŸ“„ æ¹–åŒ—.txt                # æ¹–åŒ—é¢‘é“å­—å…¸
â”‚   â”œâ”€â”€ ğŸ“„ å®‰å¾½.txt                # å®‰å¾½é¢‘é“å­—å…¸
â”‚   â”œâ”€â”€ ğŸ“„ ç¦å»º.txt                # ç¦å»ºé¢‘é“å­—å…¸
â”‚   â”œâ”€â”€ ğŸ“„ è¾½å®.txt                # è¾½å®é¢‘é“å­—å…¸
â”‚   â”œâ”€â”€ ğŸ“„ é™•è¥¿.txt                # é™•è¥¿é¢‘é“å­—å…¸
â”‚   â”œâ”€â”€ ğŸ“„ æ²³åŒ—.txt                # æ²³åŒ—é¢‘é“å­—å…¸
â”‚   â”œâ”€â”€ ğŸ“„ æ±Ÿè¥¿.txt                # æ±Ÿè¥¿é¢‘é“å­—å…¸
â”‚   â”œâ”€â”€ ğŸ“„ å¹¿è¥¿.txt                # å¹¿è¥¿é¢‘é“å­—å…¸
â”‚   â”œâ”€â”€ ğŸ“„ äº‘å—.txt                # äº‘å—é¢‘é“å­—å…¸
â”‚   â”œâ”€â”€ ğŸ“„ å±±è¥¿.txt                # å±±è¥¿é¢‘é“å­—å…¸
â”‚   â”œâ”€â”€ ğŸ“„ é»‘é¾™æ±Ÿ.txt              # é»‘é¾™æ±Ÿé¢‘é“å­—å…¸
â”‚   â”œâ”€â”€ ğŸ“„ å‰æ—.txt                # å‰æ—é¢‘é“å­—å…¸
â”‚   â”œâ”€â”€ ğŸ“„ è´µå·.txt                # è´µå·é¢‘é“å­—å…¸
â”‚   â”œâ”€â”€ ğŸ“„ ç”˜è‚ƒ.txt                # ç”˜è‚ƒé¢‘é“å­—å…¸
â”‚   â”œâ”€â”€ ğŸ“„ å†…è’™.txt                # å†…è’™å¤é¢‘é“å­—å…¸
â”‚   â”œâ”€â”€ ğŸ“„ æ–°ç–†.txt                # æ–°ç–†é¢‘é“å­—å…¸
â”‚   â”œâ”€â”€ ğŸ“„ æµ·å—.txt                # æµ·å—é¢‘é“å­—å…¸
â”‚   â”œâ”€â”€ ğŸ“„ å®å¤.txt                # å®å¤é¢‘é“å­—å…¸
â”‚   â”œâ”€â”€ ğŸ“„ é’æµ·.txt                # é’æµ·é¢‘é“å­—å…¸
â”‚   â”œâ”€â”€ ğŸ“„ è¥¿è—.txt                # è¥¿è—é¢‘é“å­—å…¸
â”‚   â”œâ”€â”€ ğŸ“„ é¦™æ¸¯.txt                # é¦™æ¸¯é¢‘é“å­—å…¸
â”‚   â”œâ”€â”€ ğŸ“„ æ¾³é—¨.txt                # æ¾³é—¨é¢‘é“å­—å…¸
â”‚   â””â”€â”€ ğŸ“„ å°æ¹¾.txt                # å°æ¹¾é¢‘é“å­—å…¸
â”‚
â”œâ”€â”€ ğŸ“ æ‰‹å·¥åŒº/                     # ğŸ› ï¸ æ‰‹å·¥ç»´æŠ¤çš„é«˜è´¨é‡æº
â”‚   â”œâ”€â”€ ğŸ“„ ä¼˜è´¨å¤®è§†.txt            # â­ ä¸“äº«å¤®è§†æº (ç‹¬ç«‹åˆ†ç±»)
â”‚   â”œâ”€â”€ ğŸ“„ ä¼˜è´¨å«è§†.txt            # â­ ä¸“äº«å«è§†æº (ç‹¬ç«‹åˆ†ç±»)
â”‚   â”œâ”€â”€ ğŸ“„ æµ™æ±Ÿé¢‘é“.txt            # ğŸ§µ æµ™æ±Ÿæ‰‹å·¥æº (è¿½åŠ åˆ°è‡ªåŠ¨æº)
â”‚   â”œâ”€â”€ ğŸ“„ å¹¿ä¸œé¢‘é“.txt            # ğŸ¯ å¹¿ä¸œæ‰‹å·¥æº (è¿½åŠ åˆ°è‡ªåŠ¨æº)
â”‚   â”œâ”€â”€ ğŸ“„ æ¹–åŒ—é¢‘é“.txt            # ğŸ¯ æ¹–åŒ—æ‰‹å·¥æº (è¿½åŠ åˆ°è‡ªåŠ¨æº)
â”‚   â”œâ”€â”€ ğŸ“„ ä¸Šæµ·é¢‘é“.txt            # ğŸ™ï¸ ä¸Šæµ·æ‰‹å·¥æº (è¿½åŠ åˆ°è‡ªåŠ¨æº)
â”‚   â”œâ”€â”€ ğŸ“„ æ±Ÿè‹é¢‘é“.txt            # ğŸ æ±Ÿè‹æ‰‹å·¥æº (è¿½åŠ åˆ°è‡ªåŠ¨æº)
â”‚   â”œâ”€â”€ ğŸ“„ AKTV.txt               # ğŸ’“ AKTVç›´æ’­æº (æ··åˆå¤„ç†)
â”‚   â”œâ”€â”€ ğŸ“„ ä»Šæ—¥æ¨è.txt            # ğŸ’¯ ä»Šæ—¥æ¨èæº (éšæœºé€‰æ‹©)
â”‚   â”œâ”€â”€ ğŸ“„ ä»Šæ—¥æ¨å°.txt            # ğŸ•’ ç‰ˆæœ¬ä¿¡æ¯é“¾æ¥æº
â”‚   â””â”€â”€ ğŸ“„ about.txt               # â„¹ï¸ å…³äºä¿¡æ¯æ–‡ä»¶
â”‚
â”œâ”€â”€ ğŸ“ blacklist/                  # ğŸš« é»‘åå•ç®¡ç†ç³»ç»Ÿ
â”‚   â”œâ”€â”€ ğŸ“„ blacklist_auto.txt      # ğŸ”„ è‡ªåŠ¨é»‘åå• (ç³»ç»Ÿç”Ÿæˆ)
â”‚   â”œâ”€â”€ ğŸ“„ blacklist_manual.txt    # âœï¸ æ‰‹åŠ¨é»‘åå• (äººå·¥ç»´æŠ¤)
â”‚   â””â”€â”€ ğŸ“„ whitelist_auto.txt      # âœ… ç™½åå• (é«˜è´¨é‡æºè®°å½•)
â”‚
â”œâ”€â”€ ğŸ“„ corrections_name.txt        # ğŸ”§ é¢‘é“åç§°çº é”™å­—å…¸
â”œâ”€â”€ ğŸ“„ logo.txt                    # ğŸ–¼ï¸ é¢‘é“Logoå¯¹åº”å…³ç³»
â””â”€â”€ ğŸ“„ urls-daily.txt              # ğŸŒ æ¯æ—¥æ›´æ–°çš„æ•°æ®æºURLåˆ—è¡¨
```

1.2 è¾“å‡ºç›®å½•ç»“æ„ (output/)

```
output/
â”œâ”€â”€ ğŸ“„ full.txt                    # ğŸ“¦ å®Œæ•´ç‰ˆæ’­æ”¾åˆ—è¡¨ (TXTæ ¼å¼)
â”œâ”€â”€ ğŸ“„ full.m3u                    # ğŸ“¦ å®Œæ•´ç‰ˆæ’­æ”¾åˆ—è¡¨ (M3Uæ ¼å¼)
â”œâ”€â”€ ğŸ“„ lite.txt                    # ğŸ¯ ç²¾ç®€ç‰ˆæ’­æ”¾åˆ—è¡¨ (TXTæ ¼å¼)
â”œâ”€â”€ ğŸ“„ lite.m3u                    # ğŸ¯ ç²¾ç®€ç‰ˆæ’­æ”¾åˆ—è¡¨ (M3Uæ ¼å¼)
â”œâ”€â”€ ğŸ“„ custom.txt                  # ğŸ› ï¸ å®šåˆ¶ç‰ˆæ’­æ”¾åˆ—è¡¨ (TXTæ ¼å¼)
â”œâ”€â”€ ğŸ“„ custom.m3u                  # ğŸ› ï¸ å®šåˆ¶ç‰ˆæ’­æ”¾åˆ—è¡¨ (M3Uæ ¼å¼)
â”œâ”€â”€ ğŸ“„ others.txt                  # ğŸ“¦ æœªåˆ†ç±»é¢‘é“åˆ—è¡¨
â”œâ”€â”€ ğŸ“„ tiyu.html                   # ğŸ† ä½“è‚²èµ›äº‹ç½‘é¡µç‰ˆ
â””â”€â”€ ğŸ“„ tiyu.txt                    # ğŸ† ä½“è‚²èµ›äº‹æ–‡æœ¬ç‰ˆ
```

---

ğŸ“ äºŒã€æ–‡ä»¶æ ¼å¼è¯¦è§£

2.1 å­—å…¸æ–‡ä»¶æ ¼å¼ (*.txt)

æ ¼å¼: æ¯è¡Œä¸€ä¸ªé¢‘é“åç§°ï¼ŒæŒ‰æœŸæœ›çš„æ’åºé¡ºåºæ’åˆ—

ğŸ“„ ç¤ºä¾‹ (CCTV.txt):

```txt
CCTV1
CCTV2
CCTV3
CCTV4
CCTV5
CCTV5+
CCTV6
CCTV7
CCTV8
CCTV9
CCTV10
CCTV11
CCTV12
CCTV13
CCTV14
CCTV15
CCTV16
CCTV17
CCTV4K
CCTV8K
```

ğŸ“„ ç¤ºä¾‹ (å«è§†.txt):

```txt
åŒ—äº¬å«è§†
ä¸œæ–¹å«è§†
å¤©æ´¥å«è§†
é‡åº†å«è§†
æ²³åŒ—å«è§†
å±±è¥¿å«è§†
è¾½å®å«è§†
å‰æ—å«è§†
é»‘é¾™æ±Ÿå«è§†
æ±Ÿè‹å«è§†
æµ™æ±Ÿå«è§†
å®‰å¾½å«è§†
ç¦å»ºå«è§†
æ±Ÿè¥¿å«è§†
å±±ä¸œå«è§†
æ²³å—å«è§†
æ¹–åŒ—å«è§†
æ¹–å—å«è§†
å¹¿ä¸œå«è§†
å¹¿è¥¿å«è§†
æµ·å—å«è§†
å››å·å«è§†
è´µå·å«è§†
äº‘å—å«è§†
é™•è¥¿å«è§†
ç”˜è‚ƒå«è§†
é’æµ·å«è§†
å†…è’™å¤å«è§†
å®å¤å«è§†
æ–°ç–†å«è§†
è¥¿è—å«è§†
```

2.2 å…³é”®è¯å­—å…¸æ ¼å¼ (ç”¨äºæ¨¡ç³ŠåŒ¹é…)

æ ¼å¼: æ¯è¡Œä¸€ä¸ªå…³é”®è¯ï¼Œé¢‘é“åç§°åŒ…å«ä»»æ„å…³é”®è¯å³åŒ¹é…

ğŸ“„ ç¤ºä¾‹ (ä½“è‚²èµ›äº‹.txt):

```txt
ä¸­è¶…
è‹±è¶…
è¥¿ç”²
æ„ç”²
å¾·ç”²
æ³•ç”²
æ¬§å† 
äºšå† 
ä¸–ç•Œæ¯
æ¬§æ´²æ¯
äºšæ´²æ¯
å¥¥è¿ä¼š
ä¸–é”¦èµ›
é©¬æ‹‰æ¾
ç¯®çƒ
è¶³çƒ
æ’çƒ
ä¹’ä¹“çƒ
ç¾½æ¯›çƒ
ç½‘çƒ
æ¸¸æ³³
ç”°å¾„
```

2.3 æ‰‹å·¥åŒºæºæ–‡ä»¶æ ¼å¼

æ ¼å¼: æ ‡å‡†é¢‘é“è¡Œæ ¼å¼ï¼Œä½†ä¸ç»è¿‡ process_channel_line å¤„ç†

ğŸ“„ ç¤ºä¾‹ (æµ™æ±Ÿé¢‘é“.txt):

```txt
æµ™æ±Ÿå«è§†,http://example.com/zjws
æµ™æ±Ÿå«è§†é«˜æ¸…,http://example.com/zjwshd
é’±æ±Ÿéƒ½å¸‚,http://example.com/qjds
æµ™æ±Ÿå½±è§†å¨±ä¹,http://example.com/zjysyl
æµ™æ±Ÿæ•™è‚²ç§‘æŠ€,http://example.com/zjjy
```

2.4 ä¸“äº«æºæ–‡ä»¶æ ¼å¼ (ç‹¬ç«‹åˆ†ç±»)

æ ¼å¼: æ ‡å‡†é¢‘é“è¡Œæ ¼å¼ï¼Œç›´æ¥è¯»å–ä½œä¸ºç‹¬ç«‹åˆ†ç±»

ğŸ“„ ç¤ºä¾‹ (ä¼˜è´¨å¤®è§†.txt):

```txt
CCTV1,http://example.com/cctv1-hq
CCTV2,http://example.com/cctv2-hq
CCTV3,http://example.com/cctv3-hq
CCTV4K,http://example.com/cctv4k-hq
CCTV5+,http://example.com/cctv5plus-hq
CCTV8,http://example.com/cctv8-hq
CCTV13,http://example.com/cctv13-hq
```

2.5 é»‘åå•æ–‡ä»¶æ ¼å¼

ğŸ“„ ç¤ºä¾‹ (blacklist_manual.txt):

```txt
é»‘åå•é¢‘é“1,http://bad-url1.com/live
é»‘åå•é¢‘é“2,http://bad-url2.com/stream
å¤±æ•ˆé¢‘é“,http://expired-url.com/tv
å¹¿å‘Šé¢‘é“,http://ad-channel.com/live
```

2.6 ç™½åå•æ–‡ä»¶æ ¼å¼

ğŸ“„ ç¤ºä¾‹ (whitelist_auto.txt):

```txt
RespoTime,whitelist,#genre#
2024-12-01 14:30:00
10ms,CCTV1,http://fast-server.com/cctv1
20ms,CCTV2,http://fast-server.com/cctv2
150ms,æ¹–å—å«è§†,http://fast-server.com/hunan
5000ms,æ…¢é€Ÿé¢‘é“,http://slow-server.com/tv  # å“åº”å¤ªæ…¢ï¼Œä¸ä¼šè¢«é‡‡ç”¨
```

2.7 é¢‘é“åç§°çº é”™å­—å…¸æ ¼å¼

ğŸ“„ ç¤ºä¾‹ (corrections_name.txt):

```txt
# æ ¼å¼: æ­£ç¡®åç§°,é”™è¯¯åç§°1,é”™è¯¯åç§°2,é”™è¯¯åç§°3
CCTV1,CCTV-1,CCTV1ç»¼åˆ,CCTV1ç»¼åˆé¢‘é“
CCTV2,CCTV-2,CCTV2è´¢ç»,CCTV2è´¢ç»é¢‘é“
æ¹–å—å«è§†,æ¹–å—ç”µè§†å°,æ¹–å—å«è§†é¢‘é“
æµ™æ±Ÿå«è§†,æµ™æ±Ÿç”µè§†å°,æµ™æ±Ÿå«è§†é¢‘é“,æµ™æ±Ÿå«è§†HD
```

2.8 Logoå¯¹åº”å…³ç³»æ–‡ä»¶æ ¼å¼

ğŸ“„ ç¤ºä¾‹ (logo.txt):

```txt
CCTV1,https://example.com/logos/cctv1.png
CCTV2,https://example.com/logos/cctv2.png
æ¹–å—å«è§†,https://example.com/logos/hunan.png
æµ™æ±Ÿå«è§†,https://example.com/logos/zhejiang.png
ä¸œæ–¹å«è§†,https://example.com/logos/dongfang.png
```

2.9 æ•°æ®æºURLåˆ—è¡¨æ ¼å¼

ğŸ“„ ç¤ºä¾‹ (urls-daily.txt):

```txt
# æ¯æ—¥æ›´æ–°çš„ç›´æ’­æºURLåˆ—è¡¨
https://raw.githubusercontent.com/user1/iptv/main/live.m3u
https://raw.githubusercontent.com/user2/tv/main/tv.txt
https://example.com/daily/{MMdd}.m3u           # æ—¥æœŸå˜é‡ä¼šè‡ªåŠ¨æ›¿æ¢
https://example.com/yesterday/{MMdd-1}.txt      # æ˜¨å¤©æ—¥æœŸ
http://iptv-source.com/live.m3u8
https://live-source.net/channels.txt
```

---

ğŸ”§ ä¸‰ã€å¦‚ä½•å¢åˆ é¢‘é“åˆ†ç±»

3.1 æ·»åŠ æ–°çš„é¢‘é“åˆ†ç±»ï¼ˆ6æ­¥æ³•ï¼‰

æ­¥éª¤ 1ï¸âƒ£: æ·»åŠ å­˜å‚¨å˜é‡

åœ¨ä»£ç çš„é¢‘é“åˆ†ç±»å­˜å‚¨å˜é‡å®šä¹‰éƒ¨åˆ†æ·»åŠ æ–°çš„åˆ—è¡¨å˜é‡ï¼š

```python
# åœ¨ yangshi_lines, weishi_lines ç­‰å˜é‡åé¢æ·»åŠ 
new_category_lines = []      # å­˜å‚¨æ–°åˆ†ç±»çš„æ•°æ®
```

æ­¥éª¤ 2ï¸âƒ£: æ·»åŠ å­—å…¸æ–‡ä»¶

åœ¨ assets/livesource/ä¸»é¢‘é“/ ç›®å½•ä¸‹åˆ›å»ºæ–°çš„å­—å…¸æ–‡ä»¶ï¼š

```bash
# åˆ›å»ºå­—å…¸æ–‡ä»¶
echo "é¢‘é“1\né¢‘é“2\né¢‘é“3\né¢‘é“4" > assets/livesource/ä¸»é¢‘é“/æ–°åˆ†ç±».txt
```

æ­¥éª¤ 3ï¸âƒ£: åŠ è½½å­—å…¸

åœ¨é¢‘é“å­—å…¸æ–‡ä»¶è¯»å–éƒ¨åˆ†æ·»åŠ å­—å…¸åŠ è½½ï¼š

```python
# åœ¨ yangshi_dictionary, weishi_dictionary ç­‰åé¢æ·»åŠ 
new_category_dictionary = read_txt_to_array('assets/livesource/ä¸»é¢‘é“/æ–°åˆ†ç±».txt')
```

æ­¥éª¤ 4ï¸âƒ£: æ·»åŠ åˆ†ç±»å¤„ç†é€»è¾‘

åœ¨ process_channel_line å‡½æ•°ä¸­æ·»åŠ åˆ†ç±»åˆ¤æ–­é€»è¾‘ï¼š

```python
# åœ¨ç›¸åº”çš„åˆ†ç±»åˆ¤æ–­åŒºåŸŸæ·»åŠ ï¼ˆæ³¨æ„é¡ºåºï¼‰
elif channel_name in new_category_dictionary and check_url_existence(new_category_lines, channel_address):
    new_category_lines.append(process_name_string(line.strip()))
```

æ­¥éª¤ 5ï¸âƒ£: æ·»åŠ å·¥åŒºæ”¯æŒï¼ˆå¯é€‰ï¼‰

å¦‚æœéœ€è¦æ‰‹å·¥åŒºæ”¯æŒï¼Œåˆ›å»ºæ‰‹å·¥åŒºæ–‡ä»¶ï¼š

```bash
# åˆ›å»ºæ‰‹å·¥åŒºæ–‡ä»¶
touch assets/livesource/æ‰‹å·¥åŒº/æ–°åˆ†ç±».txt
```

å¹¶åœ¨æ‰‹å·¥åŒºå¤„ç†éƒ¨åˆ†æ·»åŠ ï¼š

```python
new_category_lines += read_txt_to_array('assets/livesource/æ‰‹å·¥åŒº/æ–°åˆ†ç±».txt')
```

æ­¥éª¤ 6ï¸âƒ£: æ·»åŠ æ’­æ”¾åˆ—è¡¨è¾“å‡º

åœ¨æ’­æ”¾åˆ—è¡¨ç”Ÿæˆéƒ¨åˆ†æ·»åŠ è¾“å‡ºæ ¼å¼ï¼š

```python
# åœ¨å®Œæ•´ç‰ˆæ’­æ”¾åˆ—è¡¨ä¸­æ·»åŠ 
["ğŸ¨æ–°åˆ†ç±»é¢‘é“,#genre#"] + sort_data(new_category_dictionary, 
    set(correct_name_data(corrections_name, new_category_lines))) + ['\n'] + \
```

3.2 åˆ é™¤é¢‘é“åˆ†ç±»ï¼ˆ4æ­¥æ³•ï¼‰

æ­¥éª¤ 1ï¸âƒ£: ç§»é™¤å­˜å‚¨å˜é‡

åˆ é™¤å¯¹åº”çš„åˆ—è¡¨å˜é‡å®šä¹‰ï¼š

```python
# åˆ é™¤è¿™è¡Œ
old_category_lines = []      # è¦åˆ é™¤çš„åˆ†ç±»
```

æ­¥éª¤ 2ï¸âƒ£: ç§»é™¤å­—å…¸åŠ è½½

åˆ é™¤å­—å…¸åŠ è½½ä»£ç ï¼š

```python
# åˆ é™¤è¿™è¡Œ
old_category_dictionary = read_txt_to_array('assets/livesource/ä¸»é¢‘é“/æ—§åˆ†ç±».txt')
```

æ­¥éª¤ 3ï¸âƒ£: ç§»é™¤åˆ†ç±»å¤„ç†é€»è¾‘

åœ¨ process_channel_line å‡½æ•°ä¸­åˆ é™¤å¯¹åº”çš„ elif åˆ†æ”¯ã€‚

æ­¥éª¤ 4ï¸âƒ£: ç§»é™¤æ’­æ”¾åˆ—è¡¨è¾“å‡º

åœ¨æ’­æ”¾åˆ—è¡¨ç”Ÿæˆéƒ¨åˆ†åˆ é™¤å¯¹åº”çš„è¾“å‡ºè¡Œã€‚

3.3 ä¿®æ”¹åˆ†ç±»åç§°ï¼ˆ3æ­¥æ³•ï¼‰

æ­¥éª¤ 1ï¸âƒ£: ä¿®æ”¹å­—å…¸æ–‡ä»¶å

```bash
mv assets/livesource/ä¸»é¢‘é“/æ—§åç§°.txt assets/livesource/ä¸»é¢‘é“/æ–°åç§°.txt
```

æ­¥éª¤ 2ï¸âƒ£: ä¿®æ”¹ä»£ç ä¸­çš„å­—å…¸å¼•ç”¨

```python
# ä¿®æ”¹å­—å…¸åŠ è½½
new_name_dictionary = read_txt_to_array('assets/livesource/ä¸»é¢‘é“/æ–°åç§°.txt')

# ä¿®æ”¹åˆ†ç±»åˆ¤æ–­
elif channel_name in new_name_dictionary and check_url_existence(new_name_lines, channel_address):
```

æ­¥éª¤ 3ï¸âƒ£: ä¿®æ”¹æ’­æ”¾åˆ—è¡¨è¾“å‡º

```python
["ğŸ¯æ–°åç§°é¢‘é“,#genre#"] + sort_data(new_name_dictionary, 
    set(correct_name_data(corrections_name, new_name_lines))) + ['\n'] + \
```

---

âš™ï¸ å››ã€é…ç½®è®¾ç½®è¯¦è§£

4.1 é»‘åå•ç®¡ç†ç³»ç»Ÿé…ç½®

ğŸš« è‡ªåŠ¨é»‘åå• (blacklist_auto.txt)

ä½œç”¨: ç³»ç»Ÿè‡ªåŠ¨æ£€æµ‹å¹¶æ·»åŠ çš„å¤±æ•ˆæº
æ›´æ–°é¢‘ç‡: æ¯æ—¥è‡ªåŠ¨æ›´æ–°
æ ¼å¼è¦æ±‚: é¢‘é“åç§°,URL

ç»´æŠ¤æ–¹æ³•:

```bash
# æŸ¥çœ‹è‡ªåŠ¨é»‘åå•
cat assets/livesource/blacklist/blacklist_auto.txt

# æ¸…ç©ºè‡ªåŠ¨é»‘åå•ï¼ˆæ…ç”¨ï¼‰
> assets/livesource/blacklist/blacklist_auto.txt
```

âœï¸ æ‰‹åŠ¨é»‘åå• (blacklist_manual.txt)

ä½œç”¨: äººå·¥ç»´æŠ¤çš„ä¸è‰¯æºåˆ—è¡¨
æ›´æ–°æ–¹å¼: æ‰‹åŠ¨ç¼–è¾‘
æ ¼å¼è¦æ±‚: é¢‘é“åç§°,URL

æ·»åŠ æ–¹æ³•:

```bash
# æ·»åŠ å•ä¸ªé»‘åå•
echo "ä¸è‰¯é¢‘é“,http://bad-channel.com/live" >> assets/livesource/blacklist/blacklist_manual.txt

# æ‰¹é‡æ·»åŠ 
cat >> assets/livesource/blacklist/blacklist_manual.txt << EOF
é¢‘é“1,http://bad1.com
é¢‘é“2,http://bad2.com
é¢‘é“3,http://bad3.com
EOF
```

âœ… ç™½åå• (whitelist_auto.txt)

ä½œç”¨: è®°å½•é«˜è´¨é‡æºçš„å“åº”æ—¶é—´
ç”Ÿæˆæ–¹å¼: è‡ªåŠ¨æ£€æµ‹ç”Ÿæˆ
æ ¼å¼è¦æ±‚: å“åº”æ—¶é—´,é¢‘é“åç§°,URL

å“åº”æ—¶é—´é˜ˆå€¼:

Â· âœ… < 2000ms: ä¼šè¢«é‡‡ç”¨
Â· âš ï¸ 2000-5000ms: å¯èƒ½è¢«é‡‡ç”¨
Â· âŒ > 5000ms: ä¸ä¼šè¢«é‡‡ç”¨

4.2 é¢‘é“åç§°æ¸…ç†è§„åˆ™é…ç½®

ğŸ§¹ æ¸…ç†è§„åˆ™ (removal_list å˜é‡)

åœ¨ä»£ç ä¸­ä¿®æ”¹ removal_list å˜é‡æ¥è°ƒæ•´æ¸…ç†è§„åˆ™ï¼š

```python
removal_list = [
    "_ç”µä¿¡", "ç”µä¿¡", "é¢‘é“", "é¢‘é™†", "å¤‡é™†",
    "é«˜æ¸…", "è¶…æ¸…", "æ ‡æ¸…", "HD", "[HD]", "(HD)",
    "4K", "(4K)", "{4K}", "<4K>",
    "1080", "720", "480",
    "å’ªå’•", "é—½ç‰¹", "é«˜ç‰¹",
    # ... å¯ä»¥è‡ªå®šä¹‰æ·»åŠ æˆ–åˆ é™¤
]
```

ğŸ”§ åç§°çº é”™è§„åˆ™ (corrections_name.txt)

æ ¼å¼: æ­£ç¡®åç§°,é”™è¯¯åç§°1,é”™è¯¯åç§°2,...

ç¤ºä¾‹é…ç½®:

```txt
# å¤®è§†çº é”™
CCTV1,CCTV-1,CCTV1ç»¼åˆ,CCTV1ç»¼åˆé¢‘é“,CCTV1é«˜æ¸…
CCTV2,CCTV-2,CCTV2è´¢ç»,CCTV2è´¢ç»é¢‘é“
CCTV5+,CCTV5PLUS,CCTV5åŠ ,CCTV5+

# å«è§†çº é”™
æ¹–å—å«è§†,æ¹–å—ç”µè§†å°,æ¹–å—å«è§†é¢‘é“,æ¹–å—å«è§†HD
æµ™æ±Ÿå«è§†,æµ™æ±Ÿç”µè§†å°,æµ™æ±Ÿå«è§†é¢‘é“,æµ™æ±Ÿå«è§†é«˜æ¸…

# åœ°æ–¹å°çº é”™
åŒ—äº¬å«è§†,åŒ—äº¬ç”µè§†å°,åŒ—äº¬å«è§†é¢‘é“
ä¸œæ–¹å«è§†,ä¸Šæµ·å«è§†,ä¸œæ–¹ç”µè§†å°
```

4.3 æ’­æ”¾åˆ—è¡¨è¾“å‡ºé…ç½®

ğŸ“Š ä¸‰ç§æ’­æ”¾åˆ—è¡¨ç±»å‹

1. å®Œæ•´ç‰ˆ (full.txt): åŒ…å«æ‰€æœ‰åˆ†ç±»å’Œæº
2. ç²¾ç®€ç‰ˆ (lite.txt): åªåŒ…å«å¤®è§†ã€å«è§†å’Œæ›´æ–°æ—¶é—´
3. å®šåˆ¶ç‰ˆ (custom.txt): è‡ªå®šä¹‰çš„åˆ†ç±»ç»„åˆ

ğŸ¨ ä¿®æ”¹åˆ†ç±»å›¾æ ‡å’Œé¡ºåº

åœ¨æ’­æ”¾åˆ—è¡¨ç”Ÿæˆéƒ¨åˆ†ä¿®æ”¹ï¼š

```python
# ä¿®æ”¹åˆ†ç±»æ ‡é¢˜å’Œå›¾æ ‡
["ğŸŒå¤®è§†é¢‘é“,#genre#"] + sort_data(...) + ['\n'] + \
["ğŸ“¡å«è§†é¢‘é“,#genre#"] + sort_data(...) + ['\n'] + \
["ğŸ›ï¸åŒ—äº¬é¢‘é“,#genre#"] + sort_data(...) + ['\n'] + \
```

å¯ç”¨å›¾æ ‡ç¤ºä¾‹:

Â· ğŸŒ ğŸ“¡ ğŸ›ï¸ ğŸ™ï¸ ğŸ¯ ğŸ ğŸ§µ â›°ï¸ ğŸ¼ ğŸ˜ â›©ï¸ ğŸŒ¶ï¸ ğŸï¸ ğŸš¢ ğŸ¯ ğŸŒ¾ ğŸŒŠ ğŸ”¥ ğŸ’ƒ â˜ï¸ ğŸ® ğŸ» ğŸ ğŸ« ğŸ® ğŸ‡ ğŸï¸ ğŸ•Œ ğŸ‘ ğŸ

ğŸ”„ ä¿®æ”¹æ’åºæ–¹å¼

ä¿®æ”¹ sort_data å‡½æ•°è°ƒç”¨ï¼š

```python
# é»˜è®¤: å­—å…¸æ’åº + å»é‡ + åç§°ä¿®æ­£
sort_data(å­—å…¸å, set(correct_name_data(corrections_name, æ•°æ®åˆ—è¡¨)))

# å¯é€‰: åªå»é‡æ’åº
sorted(set(correct_name_data(corrections_name, æ•°æ®åˆ—è¡¨)))

# å¯é€‰: åªå­—å…¸æ’åº
sort_data(å­—å…¸å, correct_name_data(corrections_name, æ•°æ®åˆ—è¡¨))
```

4.4 æ‰‹å·¥åŒºç®¡ç†é…ç½®

ğŸ› ï¸ æ‰‹å·¥åŒºæ–‡ä»¶ç±»å‹

1. è¿½åŠ å‹: è¿½åŠ åˆ°è‡ªåŠ¨é‡‡é›†çš„æ•°æ®ä¸­
   Â· æ–‡ä»¶ä½ç½®: assets/livesource/æ‰‹å·¥åŒº/[åœ°åŒº]é¢‘é“.txt
   Â· å¤„ç†æ–¹å¼: åœ°åŒº_lines += read_txt_to_array(...)
   Â· ç‰¹ç‚¹: ä¸å»é‡ï¼Œä¸æ£€æŸ¥é»‘åå•
2. ç‹¬ç«‹å‹: ä½œä¸ºç‹¬ç«‹åˆ†ç±»
   Â· æ–‡ä»¶ä½ç½®: assets/livesource/æ‰‹å·¥åŒº/ä¼˜è´¨*.txt
   Â· å¤„ç†æ–¹å¼: read_txt_to_array(...) ç›´æ¥è¾“å‡º
   Â· ç‰¹ç‚¹: ç‹¬ç«‹åˆ†ç±»ï¼Œä¸ä¸è‡ªåŠ¨æºæ··åˆ
3. æ··åˆå‹: ç»è¿‡æ ‡å‡†å¤„ç†
   Â· æ–‡ä»¶ä½ç½®: assets/livesource/æ‰‹å·¥åŒº/AKTV.txt
   Â· å¤„ç†æ–¹å¼: process_channel_line(line)
   Â· ç‰¹ç‚¹: ä¼šæ£€æŸ¥é»‘åå•ï¼Œä¼šå»é‡

ğŸ“ æ·»åŠ å·¥åŒºæº

```bash
# 1. åˆ›å»ºæˆ–ç¼–è¾‘æ‰‹å·¥åŒºæ–‡ä»¶
vi assets/livesource/æ‰‹å·¥åŒº/æµ™æ±Ÿé¢‘é“.txt

# 2. æ·»åŠ é¢‘é“æºï¼ˆæ ¼å¼: é¢‘é“åç§°,URLï¼‰
æµ™æ±Ÿå«è§†,http://fast-server.com/zjws
æµ™æ±Ÿå«è§†é«˜æ¸…,http://fast-server.com/zjwshd
é’±æ±Ÿéƒ½å¸‚,http://fast-server.com/qjds

# 3. ç¡®ä¿ä»£ç ä¸­æœ‰å¯¹åº”çš„å¤„ç†
# åœ¨æ‰‹å·¥åŒºå¤„ç†éƒ¨åˆ†åº”è¯¥æœ‰ï¼š
# zhejiang_lines += read_txt_to_array('assets/livesource/æ‰‹å·¥åŒº/æµ™æ±Ÿé¢‘é“.txt')
```

ğŸ—‘ï¸ åˆ é™¤å·¥åŒºæº

```bash
# 1. ä»æ‰‹å·¥åŒºæ–‡ä»¶ä¸­åˆ é™¤ç‰¹å®šè¡Œ
sed -i '/ä¸è‰¯é¢‘é“/d' assets/livesource/æ‰‹å·¥åŒº/æµ™æ±Ÿé¢‘é“.txt

# 2. æˆ–æ¸…ç©ºæ•´ä¸ªæ–‡ä»¶
> assets/livesource/æ‰‹å·¥åŒº/æµ™æ±Ÿé¢‘é“.txt
```

4.5 ä»Šæ—¥æ¨èé…ç½®

ğŸ’¯ ä»Šæ—¥æ¨èæºç®¡ç†

æ–‡ä»¶ä½ç½®: assets/livesource/æ‰‹å·¥åŒº/ä»Šæ—¥æ¨è.txt
æ ¼å¼: æ¯è¡Œä¸€ä¸ªé¢‘é“æº (é¢‘é“åç§°,URL)

é…ç½®æ–¹æ³•:

```bash
# æ·»åŠ æ¨èæº
echo "CCTV1é«˜æ¸…,http://best-server.com/cctv1" >> assets/livesource/æ‰‹å·¥åŒº/ä»Šæ—¥æ¨è.txt
echo "æ¹–å—å«è§†è¶…æ¸…,http://best-server.com/hunan" >> assets/livesource/æ‰‹å·¥åŒº/ä»Šæ—¥æ¨è.txt

# æŸ¥çœ‹å½“å‰æ¨èæº
cat assets/livesource/æ‰‹å·¥åŒº/ä»Šæ—¥æ¨è.txt
```

å·¥ä½œåŸç†:

Â· æ¯æ¬¡è¿è¡Œè„šæœ¬æ—¶éšæœºé€‰æ‹©ä¸€ä¸ªæºä½œä¸º"ä»Šæ—¥æ¨è"
Â· åŒæ—¶ä»åŒä¸€ä¸ªæ–‡ä»¶ä¸­éšæœºé€‰æ‹©5ä¸ªæºç”¨äº"æ¨è"ã€"ä½è°ƒ"ã€"ä½¿ç”¨"ã€"ç¦æ­¢"ã€"è´©å–"

ğŸ•’ ç‰ˆæœ¬ä¿¡æ¯é…ç½®

æ–‡ä»¶ä½ç½®: assets/livesource/æ‰‹å·¥åŒº/ä»Šæ—¥æ¨å°.txt
æ ¼å¼: æ¯è¡Œä¸€ä¸ªè§†é¢‘é“¾æ¥

é…ç½®æ–¹æ³•:

```bash
# æ›´æ–°ç‰ˆæœ¬ä¿¡æ¯è§†é¢‘é“¾æ¥
echo "https://example.com/video1.mp4" > assets/livesource/æ‰‹å·¥åŒº/ä»Šæ—¥æ¨å°.txt
echo "https://example.com/video2.mp4" >> assets/livesource/æ‰‹å·¥åŒº/ä»Šæ—¥æ¨å°.txt
```

---

ğŸ” äº”ã€è°ƒè¯•å’Œæ•…éšœæ’é™¤

5.1 å¸¸è§é—®é¢˜æ’æŸ¥

â“ é—®é¢˜: é¢‘é“æ²¡æœ‰è¢«æ­£ç¡®åˆ†ç±»

æ£€æŸ¥æ­¥éª¤:

1. æ£€æŸ¥é¢‘é“åç§°æ˜¯å¦åœ¨å¯¹åº”çš„å­—å…¸æ–‡ä»¶ä¸­
2. æ£€æŸ¥é¢‘é“åç§°æ¸…ç†è§„åˆ™æ˜¯å¦è¿‡åº¦æ¸…ç†
3. æŸ¥çœ‹ output/others.txt æ˜¯å¦åœ¨è¯¥æ–‡ä»¶ä¸­
4. æ£€æŸ¥é»‘åå•æ˜¯å¦è¯¯æ€

è°ƒè¯•å‘½ä»¤:

```bash
# æŸ¥çœ‹æœªåˆ†ç±»çš„é¢‘é“
cat output/others.txt | grep "é¢‘é“åç§°"

# æ£€æŸ¥å­—å…¸åŒ¹é…
grep "é¢‘é“åç§°" assets/livesource/ä¸»é¢‘é“/å¯¹åº”å­—å…¸.txt
```

â“ é—®é¢˜: æ’­æ”¾åˆ—è¡¨ä¸­æœ‰é‡å¤é¢‘é“

æ£€æŸ¥æ­¥éª¤:

1. æ£€æŸ¥æ‰‹å·¥åŒºæºæ˜¯å¦ä¸è‡ªåŠ¨æºé‡å¤
2. æ£€æŸ¥ä¸åŒåˆ†ç±»ä¸­æ˜¯å¦æœ‰ç›¸åŒé¢‘é“
3. æ£€æŸ¥å»é‡é€»è¾‘æ˜¯å¦æ­£å¸¸å·¥ä½œ

è°ƒè¯•å‘½ä»¤:

```bash
# æŸ¥æ‰¾é‡å¤URL
cat output/full.txt | grep -o 'http[^,]*' | sort | uniq -d

# ç»Ÿè®¡æ¯ä¸ªåˆ†ç±»çš„é¢‘é“æ•°
echo "å¤®è§†: $(grep -c '^CCTV' output/full.txt)"
echo "å«è§†: $(grep -c 'å«è§†' output/full.txt)"
```

â“ é—®é¢˜: é¢‘é“åç§°æ˜¾ç¤ºä¸æ­£å¸¸

æ£€æŸ¥æ­¥éª¤:

1. æ£€æŸ¥ corrections_name.txt çº é”™è§„åˆ™
2. æ£€æŸ¥ removal_list æ¸…ç†è§„åˆ™
3. æ£€æŸ¥ç¹ä½“è½¬ç®€ä½“æ˜¯å¦æ­£å¸¸

è°ƒè¯•å‘½ä»¤:

```bash
# æŸ¥çœ‹åŸå§‹é¢‘é“åç§°
cat output/others.txt | head -20

# æµ‹è¯•åç§°æ¸…ç†
python3 -c "
from opencc import OpenCC
cc = OpenCC('t2s')
print(cc.convert('é »é“åç¨±'))
"
```

5.2 æ—¥å¿—åˆ†æ

ğŸ“Š è¿è¡Œæ—¥å¿—è§£è¯»

```
ğŸ”´ é»‘åå•ç»Ÿè®¡ä¿¡æ¯:
   è‡ªåŠ¨ç»´æŠ¤: 150 æ¡
   æ‰‹åŠ¨ç»´æŠ¤: 50 æ¡
   åˆå¹¶å»é‡: 180 æ¡

ğŸ“‹ å‘ç° 25 ä¸ªæ•°æ®è®¢é˜…æº
ğŸ“¡ å¤„ç†URL: https://example.com/live.m3u
è¡Œæ•°: 1000

ğŸŸ¢ å¤„ç†ç™½åå•è‡ªåŠ¨æ–‡ä»¶...
   è¯»å–åˆ° 500 æ¡è®°å½•
   æœ‰æ•ˆç™½åå•è®°å½•: 120 æ¡

ğŸ† ä½“è‚²èµ›äº‹å¤„ç†å®Œæˆï¼šåŸå§‹ 200 æ¡ï¼Œè¿‡æ»¤å 150 æ¡

ğŸ“Š å»é‡ç»Ÿè®¡ä¿¡æ¯:
   å¤„ç†çš„å”¯ä¸€URLæ•°: 5000
   é»‘åå•URLæ•°: 180
   æ€»å¤„ç†URLæ•°: 5180
   ğŸ”„ å»é‡ç‡: 3.5%
```

ğŸš¨ é”™è¯¯æ—¥å¿—å¤„ç†

```python
# å¸¸è§é”™è¯¯åŠå¤„ç†
âŒ æ–‡ä»¶æœªæ‰¾åˆ°: assets/livesource/ä¸»é¢‘é“/xxx.txt
å¤„ç†: åˆ›å»ºç¼ºå¤±çš„å­—å…¸æ–‡ä»¶

âŒ è¯»å–æ–‡ä»¶é”™è¯¯: UnicodeDecodeError
å¤„ç†: æ£€æŸ¥æ–‡ä»¶ç¼–ç ï¼Œç¡®ä¿æ˜¯UTF-8

âŒ å¤„ç†URLæ—¶å‘ç”Ÿé”™è¯¯: timeout
å¤„ç†: ç½‘ç»œé—®é¢˜ï¼Œæ£€æŸ¥URLæ˜¯å¦å¯è®¿é—®

âŒ response_timeè½¬æ¢å¤±è´¥
å¤„ç†: æ£€æŸ¥whitelist_auto.txtæ ¼å¼
```

5.3 æ€§èƒ½ä¼˜åŒ–

âš¡ æé«˜å¤„ç†é€Ÿåº¦

1. å‡å°‘æºæ•°é‡: ç¼–è¾‘ urls-daily.txt ç§»é™¤æ…¢é€Ÿæº
2. è°ƒæ•´è¶…æ—¶æ—¶é—´: ä¿®æ”¹ get_http_response çš„ timeout å‚æ•°
3. ä¼˜åŒ–å­—å…¸æ–‡ä»¶: ç§»é™¤ä¸ç”¨çš„åˆ†ç±»å­—å…¸

ğŸ’¾ å‡å°‘å†…å­˜ä½¿ç”¨

1. åˆ†å—å¤„ç†: å¤§é‡æ•°æ®æ—¶åˆ†å—å¤„ç†
2. åŠæ—¶æ¸…ç†: å¤„ç†å®Œçš„æ•°æ®åŠæ—¶å†™å…¥æ–‡ä»¶
3. ä½¿ç”¨ç”Ÿæˆå™¨: å¯¹äºå¤§é‡æ•°æ®ä½¿ç”¨ç”Ÿæˆå™¨

---

ğŸš€ å…­ã€é«˜çº§åŠŸèƒ½é…ç½®

6.1 è‡ªå®šä¹‰ä½“è‚²èµ›äº‹å¤„ç†

ğŸ† ä½“è‚²èµ›äº‹å…³é”®è¯è¿‡æ»¤

ä¿®æ”¹ keywords_to_exclude_tiyu_txt å’Œ keywords_to_exclude_tiyu:

```python
# æ–‡æœ¬ç‰ˆè¿‡æ»¤å…³é”®è¯
keywords_to_exclude_tiyu_txt = [
    "ç‰ç‰è½¯ä»¶", "æ¦´èŠ’ç”µè§†", "å…¬ä¼—å·",
    "éº»è±†", "ã€Œå›çœ‹ã€", "å¹¿å‘Š",
    # æ·»åŠ è‡ªå®šä¹‰å…³é”®è¯
    "ä¸è‰¯ç½‘ç«™", "ç›—ç‰ˆæº"
]

# HTMLç‰ˆè¿‡æ»¤å…³é”®è¯ï¼ˆæ›´ä¸¥æ ¼ï¼‰
keywords_to_exclude_tiyu = [
    "ç‰ç‰è½¯ä»¶", "æ¦´èŠ’ç”µè§†", "å…¬ä¼—å·",
    "å’ªè§†é€š", "éº»è±†", "ã€Œå›çœ‹ã€",
    # æ·»åŠ è‡ªå®šä¹‰å…³é”®è¯
    "æµ‹è¯•é¢‘é“", "æ— æ•ˆæº"
]
```

ğŸ“… æ—¥æœŸæ ¼å¼è§„èŒƒåŒ–

ä¿®æ”¹ normalize_date_to_md å‡½æ•°æ”¯æŒæ›´å¤šæ—¥æœŸæ ¼å¼ï¼š

```python
def normalize_date_to_md(text):
    text = text.strip()
    
    # æ·»åŠ æ–°çš„æ—¥æœŸæ ¼å¼æ”¯æŒ
    # MM-DD
    text = re.sub(r'^(\d{1,2})-(\d{1,2})(.*)', r'\1-\2\3', text)
    # MM.DD
    text = re.sub(r'^(\d{1,2})\.(\d{1,2})(.*)', r'\1-\2\3', text)
    # ä¸­æ–‡"æœˆ""æ—¥"
    text = re.sub(r'^(\d{1,2})æœˆ(\d{1,2})æ—¥(.*)', r'\1-\2\3', text)
    
    return text
```

6.2 è‡ªå®šä¹‰è¾“å‡ºæ ¼å¼

ğŸ¯ ä¿®æ”¹æ’­æ”¾åˆ—è¡¨åˆ†ç»„

åœ¨æ’­æ”¾åˆ—è¡¨ç”Ÿæˆéƒ¨åˆ†è°ƒæ•´åˆ†ç»„é¡ºåºå’Œæ ‡é¢˜ï¼š

```python
# å»ºè®®çš„åˆ†ç»„é¡ºåºï¼ˆæŒ‰ç”¨æˆ·ä½¿ç”¨é¢‘ç‡ï¼‰
all_lines_custom = [
    ["ğŸŒå¤®è§†é¢‘é“,#genre#"] + ...,
    ["ğŸ“¡å«è§†é¢‘é“,#genre#"] + ...,
    ["ğŸ‡¨ğŸ‡³ä¸­å›½ç»¼åˆ,#genre#"] + ...,
    ["ğŸ“°æ–°é—»é¢‘é“,#genre#"] + ...,
    ["âš½ï¸ä½“è‚²é¢‘é“,#genre#"] + ...,
    ["ğŸ¬ç”µå½±é¢‘é“,#genre#"] + ...,
    ["ğŸ“ºç”µè§†å‰§,#genre#"] + ...,
    ["ğŸ­ç»¼è‰ºé¢‘é“,#genre#"] + ...,
    # ... å…¶ä»–åˆ†ç±»
]
```

ğŸ–¼ï¸ è‡ªå®šä¹‰Logoé…ç½®

ç¼–è¾‘ logo.txt æ–‡ä»¶ä¸ºé¢‘é“æŒ‡å®šLogoï¼š

```txt
# æ ¼å¼: é¢‘é“åç§°,LogoURL
CCTV1,https://example.com/logos/cctv1.png
CCTV2,https://example.com/logos/cctv2.png
æ¹–å—å«è§†,https://example.com/logos/hunan.png
æµ™æ±Ÿå«è§†,https://example.com/logos/zhejiang.png

# å¦‚æœæ²¡æœ‰Logoï¼Œç•™ç©ºæˆ–ä½¿ç”¨é»˜è®¤
æœªçŸ¥é¢‘é“,
```

6.3 è‡ªåŠ¨åŒ–ç»´æŠ¤è„šæœ¬

ğŸ“… æ¯æ—¥è‡ªåŠ¨æ›´æ–°

åˆ›å»ºå®šæ—¶ä»»åŠ¡ï¼ˆcron jobï¼‰è‡ªåŠ¨è¿è¡Œï¼š

```bash
# ç¼–è¾‘crontab
crontab -e

# æ·»åŠ æ¯æ—¥å‡Œæ™¨3ç‚¹è¿è¡Œ
0 3 * * * cd /path/to/script && python3 main.py

# æ·»åŠ æ—¥å¿—è®°å½•
0 3 * * * cd /path/to/script && python3 main.py >> /var/log/iptv-update.log 2>&1
```

ğŸ”„ è‡ªåŠ¨å¤‡ä»½é…ç½®

åˆ›å»ºå¤‡ä»½è„šæœ¬ï¼š

```bash
#!/bin/bash
# backup-config.sh
DATE=$(date +%Y%m%d)
BACKUP_DIR="/backup/iptv-config-$DATE"

mkdir -p $BACKUP_DIR
cp -r assets/livesource/ $BACKUP_DIR/
cp *.py $BACKUP_DIR/
echo "å¤‡ä»½å®Œæˆ: $BACKUP_DIR"
```

---

ğŸ“š ä¸ƒã€é™„å½•ï¼šå¸¸ç”¨å‘½ä»¤é€ŸæŸ¥

7.1 æ–‡ä»¶ç®¡ç†å‘½ä»¤

```bash
# æŸ¥çœ‹åˆ†ç±»ç»Ÿè®¡
grep -c "^[^,]*,[^,]*$" output/full.txt

# æŸ¥æ‰¾ç‰¹å®šé¢‘é“
grep "CCTV1" output/full.txt

# ç»Ÿè®¡URLæ•°é‡
grep -o 'http[^,]*' output/full.txt | wc -l

# æ£€æŸ¥é‡å¤URL
grep -o 'http[^,]*' output/full.txt | sort | uniq -d | wc -l
```

7.2 ç»´æŠ¤å‘½ä»¤

```bash
# æ›´æ–°æ‰‹å·¥åŒºæº
vi assets/livesource/æ‰‹å·¥åŒº/ä¼˜è´¨å¤®è§†.txt

# æ·»åŠ é»‘åå•
echo "ä¸è‰¯é¢‘é“,http://bad.com" >> assets/livesource/blacklist/blacklist_manual.txt

# æ¸…ç©ºæ—¥å¿—
> output/others.txt

# é‡æ–°ç”Ÿæˆæ‰€æœ‰åˆ—è¡¨
rm output/*.txt output/*.m3u && python3 main.py
```

7.3 è°ƒè¯•å‘½ä»¤

```bash
# æŸ¥çœ‹å¤„ç†æ—¥å¿—
tail -f /var/log/iptv-update.log

# æµ‹è¯•å•ä¸ªURL
python3 -c "
import urllib.request
req = urllib.request.Request('http://example.com/live.m3u')
response = urllib.request.urlopen(req)
print(response.read().decode('utf-8')[:500])
"

# æ£€æŸ¥Pythonä¾èµ–
python3 -c "import opencc; print('opencc OK')"
```

---

ğŸ¯ æ€»ç»“

ğŸ“‹ ç»´æŠ¤æ£€æŸ¥æ¸…å•

Â· âœ… æ¯æ—¥æ£€æŸ¥ urls-daily.txt ä¸­çš„æºæ˜¯å¦å¯ç”¨
Â· âœ… å®šæœŸæ›´æ–°æ‰‹å·¥åŒºä¼˜è´¨æº
Â· âœ… æ£€æŸ¥é»‘åå•ï¼Œç§»é™¤è¯¯æ€çš„æº
Â· âœ… æ›´æ–°é¢‘é“åç§°çº é”™å­—å…¸
Â· âœ… å¤‡ä»½é‡è¦é…ç½®æ–‡ä»¶
Â· âœ… ç›‘æ§è„šæœ¬è¿è¡Œæ—¥å¿—

ğŸ”„ ç‰ˆæœ¬æ›´æ–°æµç¨‹

1. å¤‡ä»½å½“å‰é…ç½®å’Œè„šæœ¬
2. ä¸‹è½½æ–°ç‰ˆæœ¬è„šæœ¬
3. å¯¹æ¯”å¹¶åˆå¹¶é…ç½®æ–‡ä»¶
4. æµ‹è¯•æ–°ç‰ˆæœ¬åŠŸèƒ½
5. æ›´æ–°æ–‡æ¡£å’Œè¯´æ˜

ğŸ“ æŠ€æœ¯æ”¯æŒ

Â· æŸ¥çœ‹è¯¦ç»†æ—¥å¿—: cat /var/log/iptv-update.log
Â· æ£€æŸ¥é”™è¯¯ä¿¡æ¯: æŸ¥çœ‹è„šæœ¬è¾“å‡ºçš„é”™è¯¯ä¿¡æ¯
Â· éªŒè¯é…ç½®æ–‡ä»¶: ç¡®ä¿æ‰€æœ‰æ–‡ä»¶æ ¼å¼æ­£ç¡®
Â· æµ‹è¯•ç½‘ç»œè¿æ¥: ç¡®ä¿æ‰€æœ‰æºURLå¯è®¿é—®

---

æœ€åæ›´æ–°: 2025-01-01
ç»´æŠ¤äººå‘˜: ç³»ç»Ÿç®¡ç†å‘˜
æ–‡æ¡£ç‰ˆæœ¬: v2.00.1

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æ£€æŸ¥æ—¥å¿—æ–‡ä»¶å’Œé…ç½®æ–‡ä»¶æ ¼å¼ã€‚


æ‰‹å·¥åŒºå¤„ç†ä¸­å…³äºå»é‡ã€é»‘åå•ã€è´¨é‡æ§åˆ¶ç­‰å…³é”®é€»è¾‘ï¼š

1. é»‘åå•å¤„ç†é€»è¾‘

æ‰‹å·¥åŒºæºå®Œå…¨ç»•è¿‡é»‘åå•æ£€æŸ¥

```python
# æ³¨æ„ï¼šæ‰‹å·¥åŒºæ–‡ä»¶ç›´æ¥è¯»å–å¹¶æ·»åŠ åˆ°é¢‘é“åˆ—è¡¨ï¼Œä¸ç»è¿‡process_channel_lineå‡½æ•°
zhejiang_lines += zhejiang_manual  # ç›´æ¥è¿½åŠ ï¼Œä¸æ£€æŸ¥é»‘åå•
guangdong_lines += guangdong_manual  # ç›´æ¥è¿½åŠ ï¼Œä¸æ£€æŸ¥é»‘åå•
# ... å…¶ä»–åœ°åŒºåŒç†

# ä¸“äº«æºæ–‡ä»¶ä¹Ÿæ˜¯ç›´æ¥è¯»å–
read_txt_to_array('assets/livesource/æ‰‹å·¥åŒº/ä¼˜è´¨å¤®è§†.txt')  # ä¸æ£€æŸ¥é»‘åå•
read_txt_to_array('assets/livesource/æ‰‹å·¥åŒº/ä¼˜è´¨å«è§†.txt')  # ä¸æ£€æŸ¥é»‘åå•
```

è¿™æ„å‘³ç€ï¼š

Â· æ‰‹å·¥åŒºæºä¸å—é»‘åå•é™åˆ¶
Â· å³ä½¿æŸä¸ªURLåœ¨é»‘åå•ä¸­ï¼Œæ‰‹å·¥åŒºä»ç„¶ä¼šåŒ…å«å®ƒ
Â· è¿™æ˜¯è®¾è®¡ä¸Šçš„æ•…æ„è¡Œä¸ºï¼Œå› ä¸ºæ‰‹å·¥åŒºæºè¢«è§†ä¸º"å¯ä¿¡æº"

2. å»é‡å¤„ç†é€»è¾‘

æ‰‹å·¥åŒºæºçš„å»é‡å¤„ç†

```python
# åœ°åŒºæºçš„å¤„ç†ï¼šç›´æ¥è¿½åŠ ï¼Œå¯èƒ½äº§ç”Ÿé‡å¤
zhejiang_lines += zhejiang_manual  # å¯èƒ½å’Œè‡ªåŠ¨é‡‡é›†çš„zhejiang_linesé‡å¤

# ä½†åœ¨æœ€ç»ˆè¾“å‡ºæ—¶ä¼šè¿›è¡Œå»é‡ï¼š
["ğŸ§µæµ™æ±Ÿé¢‘é“,#genre#"] + sort_data(zhejiang_dictionary, correct_name_data(corrections_name, zhejiang_lines)) + ['\n']
# æ³¨æ„ï¼šè¿™é‡Œæ²¡æœ‰ä½¿ç”¨set()å»é‡ï¼Œä¿ç•™äº†æ‰€æœ‰æº

# å¯¹æ¯”å…¶ä»–åˆ†ç±»æœ‰æ˜ç¡®å»é‡ï¼š
["ğŸ±åŠ¨Â·ç”»Â·ç‰‡,#genre#"] + sort_data(cartoon_dictionary, set(correct_name_data(corrections_name,cartoon_lines)))  # ä½¿ç”¨setå»é‡
```

å»é‡æƒ…å†µåˆ†æï¼š

åˆ†ç±» å»é‡æ–¹å¼ æ‰‹å·¥åŒºå½±å“
åœ°åŒºé¢‘é“ ä¸å»é‡ æ‰‹å·¥åŒºæºä¼šè¿½åŠ ï¼Œå¯èƒ½å¯¼è‡´é‡å¤
åŠ¨ç”»ç‰‡ã€çºªå½•ç‰‡ç­‰ set()å»é‡ é‡å¤çš„æ‰‹å·¥åŒºæºä¼šè¢«è¿‡æ»¤
ä¸“äº«åˆ†ç±» ç›´æ¥è¯»å– ç‹¬ç«‹åˆ†ç±»ï¼Œä¸ä¸è‡ªåŠ¨æºæ··åˆ

3. è´¨é‡æ§åˆ¶é€»è¾‘

ä»Šæ—¥æ¨èçš„è´¨é‡ç­›é€‰

```python
# ä»ç™½åå•è‡ªåŠ¨æ–‡ä»¶ä¸­ç­›é€‰é«˜è´¨é‡æº
for whitelist_line in whitelist_auto_lines:
    if "#genre#" not in whitelist_line and "," in whitelist_line and "://" in whitelist_line:
        whitelist_parts = whitelist_line.split(",")
        try:
            response_time = float(whitelist_parts[0].replace("ms", ""))  # æå–å“åº”æ—¶é—´
        except ValueError:
            response_time = 60000
        if response_time < 2000:  # å“åº”æ—¶é—´å°äº2ç§’çš„æ‰ä½¿ç”¨
            process_channel_line(",".join(whitelist_parts[1:]))
```

æ‰‹å·¥åŒºè´¨é‡æ§åˆ¶æœºåˆ¶ï¼š

1. äººå·¥ç­›é€‰ï¼šæ‰‹å·¥åŒºæºç”±äººå·¥ç»´æŠ¤ï¼Œè´¨é‡ç›¸å¯¹æœ‰ä¿éšœ
2. ç™½åå•å‚è€ƒï¼šéƒ¨åˆ†æºå¯èƒ½æ¥è‡ªç™½åå•ç­›é€‰ç»“æœ
3. å“åº”æ—¶é—´ç­›é€‰ï¼šresponse_time < 2000 ç¡®ä¿æºå“åº”å¿«é€Ÿ

4. AKTVç‰¹æ®Šå¤„ç†

AKTVçš„å¤„ç†æµç¨‹

```python
aktv_url = "https://raw.githubusercontent.com/.../whitelist_manual.txt"
aktv_text = get_http_response(aktv_url)  # ä¼˜å…ˆä»GitHubè·å–

if aktv_text:
    aktv_text = convert_m3u_to_txt(aktv_text)
    aktv_lines = aktv_text.strip().split('\n')
else:
    aktv_lines = read_txt_to_array('assets/livesource/æ‰‹å·¥åŒº/AKTV.txt')  # å¤‡ç”¨æœ¬åœ°æ–‡ä»¶

# AKTVæºä¼šç»è¿‡process_channel_lineå¤„ç†
for line in aktv_lines:
    process_channel_line(line)  # è¿™æ„å‘³ç€ä¼šæ£€æŸ¥é»‘åå•å’Œå»é‡
```

AKTVçš„ç‰¹æ®Šæ€§ï¼š

Â· ä»å¤–éƒ¨è·å–ï¼Œä½†å­˜å‚¨åœ¨æ‰‹å·¥åŒºç›®å½•
Â· ä¼šç»è¿‡é»‘åå•æ£€æŸ¥
Â· ä¼šè¿›è¡ŒURLå»é‡
Â· æœ‰å¤‡ç”¨æœºåˆ¶ï¼ˆGitHubå¤±è´¥æ—¶ä½¿ç”¨æœ¬åœ°ï¼‰

5. æ‰‹å·¥åŒºæºçš„å¤„ç†å·®å¼‚

å¤„ç†è·¯å¾„å¯¹æ¯”

```python
# è·¯å¾„1ï¼šæ™®é€šURLæºï¼ˆç»è¿‡å®Œæ•´å¤„ç†ï¼‰
process_url(url) â†’ process_channel_line(line) â†’ [é»‘åå•æ£€æŸ¥] â†’ [URLå»é‡] â†’ [åç§°ä¿®æ­£] â†’ åˆ†ç±»å­˜å‚¨

# è·¯å¾„2ï¼šæ‰‹å·¥åŒºåœ°åŒºæºï¼ˆç»•è¿‡å¤§éƒ¨åˆ†æ£€æŸ¥ï¼‰
ç›´æ¥è¯»å– â†’ ç›´æ¥è¿½åŠ åˆ°å¯¹åº”åˆ—è¡¨ â†’ è¾“å‡ºæ—¶åªè¿›è¡Œåç§°ä¿®æ­£

# è·¯å¾„3ï¼šæ‰‹å·¥åŒºä¸“äº«æºï¼ˆç‹¬ç«‹åˆ†ç±»ï¼‰
ç›´æ¥è¯»å– â†’ ç‹¬ç«‹åˆ†ç±»è¾“å‡º â†’ ä¸æ··åˆï¼Œä¸å»é‡

# è·¯å¾„4ï¼šAKTVæºï¼ˆæ··åˆå¤„ç†ï¼‰
å¤–éƒ¨è·å–æˆ–æœ¬åœ°è¯»å– â†’ process_channel_line â†’ [é»‘åå•æ£€æŸ¥] â†’ [URLå»é‡] â†’ åˆ†ç±»å­˜å‚¨
```

6. å¯èƒ½å­˜åœ¨çš„é‡å¤é—®é¢˜

é‡å¤åœºæ™¯åˆ†æï¼š

1. æ‰‹å·¥åŒºæº vs è‡ªåŠ¨é‡‡é›†æº
   ```python
   # å‡è®¾æ‰‹å·¥åŒºæµ™æ±Ÿé¢‘é“.txtåŒ…å«ï¼šæµ™æ±Ÿå«è§†,http://example.com/zjws
   # è‡ªåŠ¨é‡‡é›†ä¹Ÿå¯èƒ½åŒ…å«ç›¸åŒçš„URL
   # ç»“æœï¼šåœ¨æµ™æ±Ÿé¢‘é“åˆ†ç±»ä¸­å‡ºç°é‡å¤
   ```
2. æ‰‹å·¥åŒºä¸“äº«æº vs æ™®é€šåˆ†ç±»æº
   ```python
   # æ‰‹å·¥åŒºä¼˜è´¨å¤®è§†.txtå’Œè‡ªåŠ¨é‡‡é›†çš„å¤®è§†å¯èƒ½æœ‰é‡å 
   # ä½†ä¸“äº«æºæ˜¯ç‹¬ç«‹åˆ†ç±»ï¼Œæ‰€ä»¥ç”¨æˆ·ä¼šçœ‹åˆ°ä¸¤ä¸ªåˆ†ç±»éƒ½æœ‰ç›¸åŒé¢‘é“
   ```
3. ä»Šæ—¥æ¨è vs å…¶ä»–æº
   ```python
   # get_random_urlå¯èƒ½é€‰æ‹©å·²åœ¨å…¶ä»–åˆ†ç±»ä¸­çš„æº
   # ç»“æœï¼šåŒä¸€ä¸ªURLå‡ºç°åœ¨"ä»Šæ—¥æ¨è"å’ŒåŸå§‹åˆ†ç±»ä¸­
   ```

7. è®¾è®¡è€ƒé‡åˆ†æ

ä¸ºä»€ä¹ˆæ‰‹å·¥åŒºç»•è¿‡é»‘åå•ï¼Ÿ

```python
# å¯èƒ½çš„ç†ç”±ï¼š
1. æ‰‹å·¥åŒºæºæ˜¯ç»è¿‡éªŒè¯çš„é«˜è´¨é‡æº
2. å³ä½¿è¢«è‡ªåŠ¨æ£€æµ‹ä¸º"å¤±æ•ˆ"ï¼Œäººå·¥ç¡®è®¤ä»ç„¶å¯ç”¨
3. é¿å…è¯¯æ€é‡è¦æº
4. æä¾›ç¨³å®šçš„å¤‡é€‰æº
```

ä¸ºä»€ä¹ˆæ‰‹å·¥åŒºä¸å»é‡ï¼Ÿ

```python
# å¯èƒ½çš„ç†ç”±ï¼š
1. æä¾›å¤šä¸ªå¤‡é€‰æºï¼Œä¸€ä¸ªå¤±æ•ˆå¯ç”¨å¦ä¸€ä¸ª
2. ä¸åŒæºå¯èƒ½æœ‰ä¸åŒç”»è´¨ï¼ˆé«˜æ¸…ã€æ ‡æ¸…ï¼‰
3. ç”¨æˆ·åå¥½ä¸åŒæºï¼ˆç”µä¿¡ã€è”é€šã€ç§»åŠ¨ï¼‰
```

8. æ”¹è¿›å»ºè®®

å¦‚æœè¦æé«˜æ‰‹å·¥åŒºå¤„ç†çš„ä¸€è‡´æ€§ï¼š

```python
# å»ºè®®1ï¼šè®©æ‰‹å·¥åŒºä¹Ÿç»è¿‡é»‘åå•æ£€æŸ¥ï¼ˆå¯é€‰ï¼‰
def process_manual_source(file_path):
    lines = read_txt_to_array(file_path)
    filtered_lines = []
    for line in lines:
        if ',' in line and '://' in line:
            _, url = line.split(',', 1)
            if url not in combined_blacklist:  # æ£€æŸ¥é»‘åå•
                filtered_lines.append(line)
    return filtered_lines

# å»ºè®®2ï¼šç»Ÿä¸€å»é‡å¤„ç†
def add_manual_sources_with_deduplication(existing_lines, manual_lines):
    existing_urls = {line.split(',')[1] for line in existing_lines if ',' in line}
    for line in manual_lines:
        if ',' in line:
            _, url = line.split(',', 1)
            if url not in existing_urls:  # å»é‡
                existing_lines.append(line)
                existing_urls.add(url)

# å»ºè®®3ï¼šå¢åŠ æ‰‹å·¥åŒºè´¨é‡æ ‡ç­¾
["ğŸ§µæµ™æ±Ÿé¢‘é“(æ‰‹å·¥ç²¾é€‰),#genre#"] + manual_zhejiang_lines + ['\n']
["ğŸ§µæµ™æ±Ÿé¢‘é“(è‡ªåŠ¨é‡‡é›†),#genre#"] + auto_zhejiang_lines + ['\n']
```

9. å½“å‰å®é™…å½±å“

1. é»‘åå•å½±å“ï¼šæ‰‹å·¥åŒºæºä¸å—é»‘åå•é™åˆ¶
2. å»é‡å½±å“ï¼šæ‰‹å·¥åŒºåœ°åŒºæºå¯èƒ½äº§ç”Ÿé‡å¤ï¼Œå…¶ä»–åˆ†ç±»ä¼šå»é‡
3. è´¨é‡ä¿è¯ï¼šæ‰‹å·¥åŒºæºè¢«è®¤ä¸ºè´¨é‡æ›´é«˜ï¼Œæ‰€ä»¥ç‰¹æ®Šå¯¹å¾…
4. ç”¨æˆ·ä½“éªŒï¼šç”¨æˆ·å¯èƒ½ä¼šçœ‹åˆ°é‡å¤é¢‘é“ï¼Œä½†æœ‰æ›´å¤šå¤‡é€‰æº

æ€»ç»“ï¼šæ‰‹å·¥åŒºè®¾è®¡ä¸º"ç‰¹æƒåŒºåŸŸ"ï¼Œç‰ºç‰²äº†ä¸€å®šçš„å»é‡ä¸€è‡´æ€§ï¼Œä»¥æä¾›æ›´ç¨³å®šã€æ›´å¤šæ ·çš„ç›´æ’­æºé€‰æ‹©ã€‚è¿™ç§è®¾è®¡ä½“ç°äº†"å®å¯é‡å¤ï¼Œä¸å¯ç¼ºå¤±"çš„å¤‡ä»½æ€æƒ³ã€‚


"""
================================================================================
                         ç›´æ’­æºå¤„ç†å·¥å…· - æ ¼å¼è§„èŒƒæ–‡æ¡£
================================================================================
ç‰ˆæœ¬: v2.00
ä½œè€…: æ½‡ç„¶
æ—¥æœŸ: 2025-01-01

æœ¬æ–‡ä»¶å®šä¹‰äº†ç›´æ’­æºå¤„ç†å·¥å…·ä¸­çš„æ‰€æœ‰æ ‡å‡†æ ¼å¼ï¼Œä¾¿äºæŸ¥é˜…å’Œç»´æŠ¤ã€‚
================================================================================

ä¸€ã€é¢‘é“åˆ†ç±»å¤„ç†åˆ†å‘æ ¼å¼ (process_channel_lineå‡½æ•°ä¸­ä½¿ç”¨)
--------------------------------------------------------------------------------

æ ¼å¼1: å¤®è§†é¢‘é“æ ¼å¼ (ç‰¹æ®Šå…³é”®å­—åŒ¹é…)
-----------------------------------
ç”¨é€”: è¯†åˆ«æ‰€æœ‰åŒ…å«"CCTV"çš„é¢‘é“
ç‰¹ç‚¹: ä¸ä¾èµ–å­—å…¸ï¼Œç›´æ¥é€šè¿‡å…³é”®è¯"CCTV"åˆ¤æ–­
ç¤ºä¾‹:
    if "CCTV" in channel_name and check_url_existence(yangshi_lines, channel_address):
        yangshi_lines.append(process_name_string(line.strip()))

æ ¼å¼2: å­—å…¸ç²¾ç¡®åŒ¹é…æ ¼å¼
-----------------------------------
ç”¨é€”: ç²¾ç¡®åŒ¹é…é¢„è®¾çš„é¢‘é“åç§°å­—å…¸
ç‰¹ç‚¹: éœ€è¦é¢‘é“åç§°å®Œå…¨åŒ¹é…å­—å…¸ä¸­çš„æ¡ç›®
ç¤ºä¾‹:
    elif channel_name in weishi_dictionary and check_url_existence(weishi_lines, channel_address):
        weishi_lines.append(process_name_string(line.strip()))

æ ¼å¼3: å…³é”®è¯æ¨¡ç³ŠåŒ¹é…æ ¼å¼
-----------------------------------
ç”¨é€”: ä½“è‚²èµ›äº‹ã€å’ªå’•èµ›äº‹ç­‰éœ€è¦éƒ¨åˆ†åŒ¹é…å…³é”®è¯çš„åˆ†ç±»
ç‰¹ç‚¹: åªè¦é¢‘é“åç§°åŒ…å«å­—å…¸ä¸­çš„ä»»æ„å…³é”®è¯å³å¯
ç¤ºä¾‹:
    elif any(tyss_keyword in channel_name for tyss_keyword in tyss_dictionary) 
            and check_url_existence(tyss_lines, channel_address):
        tyss_lines.append(process_name_string(line.strip()))

æ ¼å¼4: å…¶ä»–æœªåˆ†ç±»æ ¼å¼ (å…œåº•æœºåˆ¶)
-----------------------------------
ç”¨é€”: æ”¶é›†æ‰€æœ‰æœªåŒ¹é…åˆ°ä¸Šè¿°åˆ†ç±»çš„é¢‘é“
ç‰¹ç‚¹: ä¸è¿›è¡Œprocess_name_string()å¤„ç†
ç¤ºä¾‹:
    else:
        if channel_address not in other_lines_url:
            other_lines_url.append(channel_address)
            other_lines.append(line.strip())

================================================================================

äºŒã€æ’­æ”¾åˆ—è¡¨æ•°æ®å¤„ç†ç»„åˆæ ¼å¼ (æ’­æ”¾åˆ—è¡¨ç”Ÿæˆä¸­ä½¿ç”¨)
--------------------------------------------------------------------------------
æ ¼å¼è¯´æ˜: ["åˆ†ç»„æ ‡é¢˜,#genre#"] + æ•°æ®å¤„ç†å‡½æ•° + ['\n'] + \

æ ¼å¼1: å­—å…¸æ’åº + åç§°ä¿®æ­£ (æœªå»é‡)
-----------------------------------
ç”¨é€”: éœ€è¦æŒ‰å­—å…¸æ’åºä¸”åç§°ä¿®æ­£ï¼Œä½†å…è®¸é‡å¤é¡¹çš„é¢‘é“
ç¤ºä¾‹:
    ["ğŸŒå¤®è§†é¢‘é“,#genre#"] + sort_data(yangshi_dictionary, 
            correct_name_data(corrections_name, yangshi_lines)) + ['\n'] + \

æ ¼å¼2: å­—å…¸æ’åº + å»é‡ + åç§°ä¿®æ­£
-----------------------------------
ç”¨é€”: éœ€è¦æŒ‰å­—å…¸æ’åºã€å»é‡ä¸”åç§°ä¿®æ­£çš„é¢‘é“
ç¤ºä¾‹:
    ["ğŸ¯å¹¿ä¸œé¢‘é“,#genre#"] + sort_data(guangdong_dictionary,
            set(correct_name_data(corrections_name, guangdong_lines))) + ['\n'] + \

æ ¼å¼3: å»é‡ + åç§°ä¿®æ­£ + å­—ç¬¦æ’åº
-----------------------------------
ç”¨é€”: æ²¡æœ‰å­—å…¸æ–‡ä»¶ï¼ŒæŒ‰å­—æ¯æ’åºçš„å»é‡é¢‘é“
ç¤ºä¾‹:
    ["ğŸ˜æ²³å—é¢‘é“,#genre#"] + sorted(set(correct_name_data(corrections_name, henan_lines))) + ['\n'] + \

æ ¼å¼4: å»é‡ + å­—ç¬¦æ’åº (æ— åç§°ä¿®æ­£)
-----------------------------------
ç”¨é€”: åç§°è§„èŒƒï¼Œåªéœ€å»é‡å’ŒæŒ‰å­—æ¯æ’åºçš„é¢‘é“
ç¤ºä¾‹:
    ["ğŸµéŸ³ä¹é¢‘é“,#genre#"] + sorted(set(music_lines)) + ['\n'] + \

æ ¼å¼5: å­—å…¸æ’åº + å»é‡ (æ— åç§°ä¿®æ­£)
-----------------------------------
ç”¨é€”: åç§°è§„èŒƒï¼Œåªéœ€æŒ‰å­—å…¸æ’åºå’Œå»é‡çš„é¢‘é“
ç¤ºä¾‹:
    ["ğŸ“»æ”¶Â·éŸ³Â·æœº,#genre#"] + sort_data(radio_dictionary, set(radio_lines)) + ['\n'] + \

æ ¼å¼6: å­—å…¸æ’åº + åç§°ä¿®æ­£ (æœªå»é‡)
-----------------------------------
ç”¨é€”: éœ€è¦æŒ‰å­—å…¸æ’åºå’Œåç§°ä¿®æ­£çš„ä¼ ç»Ÿé¢‘é“
ç¤ºä¾‹:
    ["ğŸ“ºç”µÂ·è§†Â·å‰§,#genre#"] + sort_data(tv_drama_dictionary,
            correct_name_data(corrections_name, tv_drama_lines)) + ['\n'] + \

æ ¼å¼7: ç›´æ¥è¯»å–æ–‡ä»¶
-----------------------------------
ç”¨é€”: ä»æ–‡ä»¶ç›´æ¥è¯»å–é¢„å¤„ç†çš„ä¼˜è´¨æº
ç¤ºä¾‹:
    ["â˜•ï¸ä¸“äº«å¤®è§†,#genre#"] + read_txt_to_array('assets/livesource/æ‰‹å·¥åŒº/ä¼˜è´¨å¤®è§†.txt') + ['\n'] + \

æ ¼å¼8: å¤„ç†åçš„å˜é‡
-----------------------------------
ç”¨é€”: ä½¿ç”¨å·²ç»è¿‡ç‰¹æ®Šå¤„ç†çš„æ•°æ®å˜é‡
ç¤ºä¾‹:
    ["ğŸ†ï¸ä½“è‚²èµ›äº‹,#genre#"] + normalized_tyss_lines + ['\n'] + \

æ ¼å¼9: å­—å…¸æ’åº + å»é‡ + åç§°ä¿®æ­£ (ç´§å‡‘æ ¼å¼)
-----------------------------------
ç”¨é€”: ä¸“ä¸šé¢‘é“çš„æ ‡å‡†å¤„ç†æ–¹å¼
ç¤ºä¾‹:
    ["ğŸ¥çºªÂ·å½•Â·ç‰‡,#genre#"] + sort_data(documentary_dictionary,
            set(correct_name_data(corrections_name, documentary_lines))) + ['\n'] + \

æ ¼å¼10: åŸå§‹æ•°æ®å˜é‡
-----------------------------------
ç”¨é€”: ç›´æ¥ä½¿ç”¨åŸå§‹æ”¶é›†çš„æ•°æ®
ç¤ºä¾‹:
    ["ğŸˆå’ªå’•èµ›äº‹,#genre#"] + mgss_lines + ['\n'] + \

æ ¼å¼11: æ–‡ä»¶è¯»å– (å¸¦è‡ªå®šä¹‰åç§°)
-----------------------------------
ç”¨é€”: è¯»å–ç‰¹å®šæ ¼å¼çš„æ–‡ä»¶æ•°æ®
ç¤ºä¾‹:
    ["âš½ï¸SPORTS,#genre#"] + read_txt_to_array('assets/livesource/æ‰‹å·¥åŒº/sports.txt') + ['\n'] + \

æ ¼å¼12: ç®€å•å˜é‡ç»„åˆ
-----------------------------------
ç”¨é€”: ç»„åˆå¤šä¸ªå˜é‡å’Œæ–‡ä»¶å†…å®¹
ç¤ºä¾‹:
    ["ğŸ•’æ›´æ–°æ—¶é—´,#genre#"] + [version] + [about] + [MTV1] + [MTV2] + [MTV3] + [MTV4] + [MTV5] + 
            read_txt_to_array('assets/livesource/æ‰‹å·¥åŒº/about.txt') + ['\n']

æ ¼å¼13: å­—å…¸æ’åº + å»é‡ + åç§°ä¿®æ­£ (åŠ¨ç”»ç‰‡ä¸“ç”¨)
-----------------------------------
ç”¨é€”: åŠ¨ç”»ç‰‡é¢‘é“çš„æ ‡å‡†å¤„ç†
ç¤ºä¾‹:
    ["ğŸ±åŠ¨Â·ç”»Â·ç‰‡,#genre#"] + sort_data(cartoon_dictionary,
            set(correct_name_data(corrections_name, cartoon_lines))) + ['\n'] + \

æ ¼å¼14: å­—å…¸æ’åº + åç§°ä¿®æ­£ (æˆæ›²ä¸“ç”¨)
-----------------------------------
ç”¨é€”: æˆæ›²é¢‘é“çš„ä¼ ç»Ÿå¤„ç†æ–¹å¼
ç¤ºä¾‹:
    ["ğŸ­æˆæ›²é¢‘é“,#genre#"] + sort_data(traditional_opera_dictionary,
            correct_name_data(corrections_name, traditional_opera_lines)) + ['\n'] + \

æ ¼å¼15: å­—å…¸æ’åº + å»é‡ (æ˜¥æ™šä¸“ç”¨)
-----------------------------------
ç”¨é€”: æ˜¥æ™šèŠ‚ç›®çš„æ ‡å‡†å¤„ç†
ç¤ºä¾‹:
    ["ğŸ§¨å†å±Šæ˜¥æ™š,#genre#"] + sort_data(spring_festival_gala_dictionary,
            set(spring_festival_gala_lines)) + ['\n'] + \

æ ¼å¼16: å»é‡ + å­—ç¬¦æ’åº + åç§°ä¿®æ­£ (æ™¯åŒºç›´æ’­)
-----------------------------------
ç”¨é€”: æ™¯åŒºç›´æ’­çš„ç®€åŒ–å¤„ç†
ç¤ºä¾‹:
    ["ğŸï¸æ™¯åŒºç›´æ’­,#genre#"] + sorted(set(correct_name_data(corrections_name, camera_lines))) + ['\n'] + \

================================================================================
æ¨èæ ‡å‡†æ ¼å¼: å­—å…¸æ’åº + å»é‡ + åç§°ä¿®æ­£ (æ ¼å¼2/9/13)
ç»Ÿä¸€å»ºè®®ä½¿ç”¨: sort_data(å­—å…¸å, set(correct_name_data(corrections_name, æ•°æ®åˆ—è¡¨)))
================================================================================
"""