name: 'ğŸŒ GitHub â†” Gitee â‘¢'
# ğŸŒ GitHub â†” Gitee â‘¢ è·¨å¹³å°ä»“åº“åŒæ­¥
on:
  workflow_dispatch:
    inputs:
      # å¹³å°é€‰æ‹©
      source_platform:
        description: 'æºä»“åº“å¹³å°'
        required: true
        type: choice
        options:
          - 'GitHub'
          - 'Gitee'
        default: 'GitHub'
      
      target_platform:
        description: 'ç›®æ ‡ä»“åº“å¹³å°'
        required: true
        type: choice
        options:
          - 'GitHub'
          - 'Gitee'
        default: 'Gitee'
      
      # GitHub â†” GitHub æ ¼å¼
      source:
        description: 'æºä»“åº“ä¿¡æ¯ï¼ˆæ ¼å¼ï¼šç”¨æˆ·/ä»“åº“å@åˆ†æ”¯ï¼‰'
        required: true
        default: 'xiaoran67/core@main'
        type: string
      
      source_folder:
        description: 'æºä»“åº“åŒæ­¥è·¯å¾„ï¼ˆç•™ç©º=æ ¹ç›®å½•ï¼‰'
        required: false
        default: ''
        type: string
      
      source_token_name:
        description: 'æºä»“åº“Tokençš„Secretåç§°'
        required: false
        default: 'XIAORAN67_GITHUB_TOKEN'
        type: string
      
      # ç›®æ ‡ä»“åº“é…ç½®
      target:
        description: 'ç›®æ ‡ä»“åº“ä¿¡æ¯ï¼ˆæ ¼å¼ï¼šç”¨æˆ·/ä»“åº“å@åˆ†æ”¯ï¼‰'
        required: true
        default: 'xiaoran67/core@master'
        type: string
      
      target_folder:
        description: 'ç›®æ ‡ä»“åº“æ¥æ”¶è·¯å¾„ï¼ˆç•™ç©º=æ ¹ç›®å½•ï¼‰'
        required: false
        default: ''
        type: string
      
      target_token_name:
        description: 'ç›®æ ‡ä»“åº“Tokençš„Secretåç§°'
        required: false
        default: 'XIAORAN67_GITEE_TOKEN'
        type: string
      
      target_private:
        description: 'ç›®æ ‡ä»“åº“æ˜¯å¦ç§æœ‰ï¼ˆä»…GitHubï¼‰'
        type: boolean
        required: true
        default: false
      
      # åŒæ­¥é…ç½®
      sync_strategy:
        description: 'åŒæ­¥ç­–ç•¥'
        required: true
        type: choice
        options:
          - 'å¢é‡'
          - 'è¦†ç›–'
        default: 'å¢é‡'
      
      commit_template:
        description: 'æäº¤ä¿¡æ¯æ¨¡æ¿'
        type: choice
        required: true
        options:
          - 'ä»…æ—¶é—´'
          - 'åŒæ­¥è¯´æ˜'
          - 'è‡ªå®šä¹‰'
        default: 'ä»…æ—¶é—´'
      
      custom_commit_msg:
        description: 'è‡ªå®šä¹‰æäº¤ä¿¡æ¯ï¼ˆé€‰"è‡ªå®šä¹‰"æ—¶å¡«å†™ï¼‰'
        type: string
        required: false
        default: ''

jobs:
  cross-platform-sync:
    runs-on: ubuntu-latest
    timeout-minutes: 30
    
    steps:
      # 1. è§£æé…ç½®ï¼ˆä¿æŒåŸè¯­æ³•ï¼‰
      - name: ğŸ§© è§£æé…ç½®ä¿¡æ¯
        id: parse_config
        run: |
          # æºä»“åº“æ ¼å¼æ ¡éªŒ
          if ! echo "${INPUT_SOURCE}" | grep -qE '^[a-zA-Z0-9-]+/[a-zA-Z0-9-]+@[a-zA-Z0-9-]+$'; then
            echo "é”™è¯¯ï¼šæºä»“åº“æ ¼å¼åº”ä¸º ç”¨æˆ·å/ä»“åº“å@åˆ†æ”¯" && exit 1
          fi
          IFS='/@' read -r source_user source_repo source_branch <<< "${INPUT_SOURCE}"
          echo "source_user=${source_user}" >> $GITHUB_ENV
          echo "source_repo=${source_repo}" >> $GITHUB_ENV
          echo "source_branch=${source_branch}" >> $GITHUB_ENV
          
          # ç›®æ ‡ä»“åº“æ ¼å¼æ ¡éªŒ
          if ! echo "${INPUT_TARGET}" | grep -qE '^[a-zA-Z0-9-]+/[a-zA-Z0-9-]+@[a-zA-Z0-9-]+$'; then
            echo "é”™è¯¯ï¼šç›®æ ‡ä»“åº“æ ¼å¼åº”ä¸º ç”¨æˆ·å/ä»“åº“å@åˆ†æ”¯" && exit 1
          fi
          IFS='/@' read -r target_user target_repo target_branch <<< "${INPUT_TARGET}"
          echo "target_user=${target_user}" >> $GITHUB_ENV
          echo "target_repo=${target_repo}" >> $GITHUB_ENV
          echo "target_branch=${target_branch}" >> $GITHUB_ENV
          
          echo "source_token_name=${INPUT_SOURCE_TOKEN_NAME}" >> $GITHUB_ENV
          echo "target_token_name=${INPUT_TARGET_TOKEN_NAME}" >> $GITHUB_ENV
        env:
          INPUT_SOURCE: ${{ inputs.source }}
          INPUT_TARGET: ${{ inputs.target }}
          INPUT_SOURCE_TOKEN_NAME: ${{ inputs.source_token_name }}
          INPUT_TARGET_TOKEN_NAME: ${{ inputs.target_token_name }}

      # 2. æ ¡éªŒTokenï¼ˆä¿æŒåŸè¯­æ³•ï¼‰
      - name: ğŸ”‘ æ ¡éªŒTokenå­˜åœ¨æ€§
        run: |
          if [ -z "${{ secrets[inputs.source_token_name] }}" ]; then
            echo "é”™è¯¯ï¼šæºä»“åº“Tokenï¼ˆ${{ inputs.source_token_name }}ï¼‰ä¸å­˜åœ¨" && exit 1
          fi
          if [ -z "${{ secrets[inputs.target_token_name] }}" ]; then
            echo "é”™è¯¯ï¼šç›®æ ‡ä»“åº“Tokenï¼ˆ${{ inputs.target_token_name }}ï¼‰ä¸å­˜åœ¨" && exit 1
          fi

      # 3. GitHubå¹³å°ï¼šæ£€æŸ¥/åˆ›å»ºç›®æ ‡ä»“åº“
      - name: ğŸ“¦ æ£€æŸ¥å¹¶åˆ›å»ºç›®æ ‡ä»“åº“ï¼ˆGitHubï¼‰
        if: ${{ github.event.inputs.target_platform == 'GitHub' }}
        run: |
          TARGET_TOKEN="${{ secrets[env.target_token_name] }}"
          REPO_CHECK_URL="https://api.github.com/repos/${{ env.target_user }}/${{ env.target_repo }}"
          REPO_EXISTS=$(curl -s -o /dev/null -w "%{http_code}" -H "Authorization: token $TARGET_TOKEN" "$REPO_CHECK_URL")
          
          if [ "$REPO_EXISTS" -eq 404 ]; then
            echo "â„¹ï¸ ç›®æ ‡GitHubä»“åº“ä¸å­˜åœ¨ï¼Œå¼€å§‹åˆ›å»º..."
            CREATE_BODY=$(jq -n --arg name "${{ env.target_repo }}" --argjson private ${{ inputs.target_private }} --arg default_branch "${{ env.target_branch }}" '{
              "name": $name, "private": $private, "auto_init": true, "default_branch": $default_branch
            }')
            CREATE_RESPONSE=$(curl -s -w "%{http_code}" -o create_result.json -X POST -H "Authorization: token $TARGET_TOKEN" -H "Accept: application/vnd.github+json" "https://api.github.com/user/repos" -d "$CREATE_BODY")
            if [ "$CREATE_RESPONSE" -ne 201 ]; then
              echo "âŒ ç›®æ ‡GitHubä»“åº“åˆ›å»ºå¤±è´¥ï¼š$(cat create_result.json)" && exit 1
            fi
            echo "âœ… GitHubä»“åº“åˆ›å»ºæˆåŠŸ"
          elif [ "$REPO_EXISTS" -ne 200 ]; then
            echo "âŒ æ£€æŸ¥GitHubä»“åº“çŠ¶æ€å¤±è´¥ï¼ŒHTTPç ï¼š$REPO_EXISTS" && exit 1
          else
            echo "âœ… GitHubä»“åº“å·²å­˜åœ¨"
          fi

      # 4. æ£€å‡ºæºä»“åº“ï¼ˆæ ¹æ®å¹³å°é€‰æ‹©æ–¹å¼ï¼‰
      - name: ğŸ“¥ æ£€å‡ºæºä»“åº“
        if: ${{ github.event.inputs.source_platform == 'GitHub' }}
        uses: actions/checkout@v4
        with:
          repository: ${{ env.source_user }}/${{ env.source_repo }}
          ref: ${{ env.source_branch }}
          path: source_repo
          token: ${{ secrets[inputs.source_token_name] }}
          fetch-depth: 0
          clean: true

      - name: ğŸ“¥ æ£€å‡ºæºä»“åº“ï¼ˆGiteeï¼‰
        if: ${{ github.event.inputs.source_platform == 'Gitee' }}
        run: |
          echo "=== ä»Giteeæ£€å‡ºæºä»“åº“ ==="
          SOURCE_TOKEN="${{ secrets[env.source_token_name] }}"
          
          # Giteeçš„URLæ ¼å¼ï¼šhttps://ç”¨æˆ·å:token@gitee.com/ç”¨æˆ·å/ä»“åº“å.git
          SOURCE_URL="https://${{ env.source_user }}:$SOURCE_TOKEN@gitee.com/${{ env.source_user }}/${{ env.source_repo }}.git"
          echo "Gitee URL: https://${{ env.source_user }}:****@gitee.com/${{ env.source_user }}/${{ env.source_repo }}.git"
          
          # å°è¯•å…‹éš†æºä»“åº“
          set +e
          echo "æ­£åœ¨å…‹éš†Giteeæºä»“åº“..."
          git clone --branch ${{ env.source_branch }} --depth=1 "$SOURCE_URL" source_repo 2>&1 | tee clone.log
          CLONE_STATUS=$?
          set -e
          
          if [ $CLONE_STATUS -eq 0 ]; then
            echo "âœ… Giteeæºä»“åº“å…‹éš†æˆåŠŸ"
          else
            echo "âŒ Giteeæºä»“åº“å…‹éš†å¤±è´¥ï¼Œé”™è¯¯ä¿¡æ¯:"
            cat clone.log
            exit 1
          fi

      # 5. æ£€å‡ºç›®æ ‡ä»“åº“ï¼ˆæ ¹æ®å¹³å°é€‰æ‹©æ–¹å¼ï¼‰
      - name: ğŸ“¥ æ£€å‡ºç›®æ ‡ä»“åº“ï¼ˆGitHubï¼‰
        if: ${{ github.event.inputs.target_platform == 'GitHub' }}
        run: |
          TARGET_TOKEN="${{ secrets[env.target_token_name] }}"
          git clone --branch ${{ env.target_branch }} "https://$TARGET_TOKEN@github.com/${{ env.target_user }}/${{ env.target_repo }}.git" target_repo
          cd target_repo && git pull origin ${{ env.target_branch }} && cd ..
          # é€’å½’åˆ›å»ºç›®æ ‡ç›®å½•ï¼ˆå³ä½¿å¤šå±‚çº§ä¸å­˜åœ¨ï¼‰
          mkdir -p "target_repo/${{ inputs.target_folder }}"

      - name: ğŸ“¥ æ£€å‡ºç›®æ ‡ä»“åº“ï¼ˆGiteeï¼‰
        if: ${{ github.event.inputs.target_platform == 'Gitee' }}
        run: |
          echo "=== å…‹éš†Giteeç›®æ ‡ä»“åº“ ==="
          TARGET_TOKEN="${{ secrets[env.target_token_name] }}"
          
          # Giteeçš„URLæ ¼å¼ï¼šhttps://ç”¨æˆ·å:token@gitee.com/ç”¨æˆ·å/ä»“åº“å.git
          TARGET_URL="https://${{ env.target_user }}:$TARGET_TOKEN@gitee.com/${{ env.target_user }}/${{ env.target_repo }}.git"
          echo "Gitee URL: https://${{ env.target_user }}:****@gitee.com/${{ env.target_user }}/${{ env.target_repo }}.git"
          
          # å°è¯•å…‹éš†ç›®æ ‡ä»“åº“
          set +e
          echo "æ­£åœ¨å…‹éš†Giteeç›®æ ‡ä»“åº“..."
          git clone --branch ${{ env.target_branch }} --depth=1 "$TARGET_URL" target_repo 2>&1 | tee clone.log
          CLONE_STATUS=$?
          set -e
          
          if [ $CLONE_STATUS -eq 0 ]; then
            echo "âœ… Giteeç›®æ ‡ä»“åº“å…‹éš†æˆåŠŸ"
          else
            echo "âš ï¸ Giteeç›®æ ‡ä»“åº“å…‹éš†å¤±è´¥ï¼Œé”™è¯¯ä¿¡æ¯:"
            cat clone.log
            echo ""
            echo "å°è¯•åˆå§‹åŒ–ç©ºä»“åº“..."
            rm -rf target_repo
            mkdir -p target_repo
            cd target_repo
            git init
            git remote add origin "$TARGET_URL"
            git checkout -b ${{ env.target_branch }} || git checkout -b main
            cd ..
            echo "âœ… å·²åˆå§‹åŒ–ç©ºä»“åº“"
          fi
          
          # ç¡®ä¿ç›®æ ‡æ–‡ä»¶å¤¹å­˜åœ¨
          if [ -n "${{ inputs.target_folder }}" ]; then
            mkdir -p "target_repo/${{ inputs.target_folder }}"
            echo "åˆ›å»ºç›®æ ‡æ–‡ä»¶å¤¹: target_repo/${{ inputs.target_folder }}"
          fi

      # 6. å®‰è£…ä¾èµ–ï¼ˆä¿æŒåŸè¯­æ³•ï¼‰
      - name: ğŸ› ï¸ å®‰è£…ä¾èµ–
        run: |
          sudo apt-get update && sudo apt-get install -y rsync jq

      # 7. æ ¸å¿ƒåŒæ­¥ï¼ˆæ—¶é—´æˆ³+å¤§å°åŒæ ¡éªŒï¼Œä¿æŒåŸè¯­æ³•ï¼‰
      - name: ğŸš€ æ‰§è¡ŒåŒæ­¥ï¼ˆæ—¶é—´æˆ³+å¤§å°åŒæ ¡éªŒï¼‰
        run: |
          # å®šä¹‰æº/ç›®æ ‡è·¯å¾„
          SOURCE_PATH="source_repo/${{ inputs.source_folder }}"
          [ -z "${{ inputs.source_folder }}" ] && SOURCE_PATH="source_repo"
          TARGET_PATH="target_repo/${{ inputs.target_folder }}"
          [ -z "${{ inputs.target_folder }}" ] && TARGET_PATH="target_repo"
          mkdir -p "$TARGET_PATH"
          
          # å…³é”®ï¼šç»Ÿä¸€æ—¶åŒº+ä¿ç•™æºæ–‡ä»¶æ—¶é—´æˆ³ï¼ˆé¿å…åç»­è¯¯åˆ¤ï¼‰
          export TZ='Asia/Shanghai'
          
          if [ "${{ inputs.sync_strategy }}" = "å¢é‡" ]; then
            # rsyncæ ¸å¿ƒé€»è¾‘ï¼šæ—¶é—´æˆ³ä¸åŒ æˆ– æ–‡ä»¶å¤§å°ä¸åŒ â†’ åŒæ­¥ï¼ˆç²¾å‡†é«˜æ•ˆï¼‰
            # --timesï¼šä¿ç•™æºæ–‡ä»¶æ—¶é—´æˆ³ï¼Œ--excludeï¼šä»…æ’é™¤.gitç›®å½•
            rsync -av --times --exclude=".git/" "${SOURCE_PATH}/" "${TARGET_PATH}/"
          else
            # è¦†ç›–åŒæ­¥ï¼šå…¨é‡æ›¿æ¢+æ¸…ç©ºç›®æ ‡å¤šä½™æ–‡ä»¶
            rsync -av --delete --force --times --exclude=".git/" "${SOURCE_PATH}/" "${TARGET_PATH}/"
          fi
          
          # æ£€æµ‹å˜åŒ–ï¼ˆå«æ–°å¢ç›®å½•/æ–‡ä»¶ï¼‰
          cd target_repo
          if git status --porcelain | grep -q .; then
            echo "CHANGES_DETECTED=true" >> $GITHUB_ENV
          else
            echo "CHANGES_DETECTED=false" >> $GITHUB_ENV
          fi

      # 8. æ£€æŸ¥Giteeä»“åº“å˜åŒ–ï¼ˆä¿æŒåŸè¯­æ³•ï¼‰
      - name: ğŸ” æ£€æŸ¥ä»“åº“å˜åŒ–
        run: |
          echo "=== æ£€æŸ¥æ–‡ä»¶å˜åŒ– ==="
          cd target_repo
          
          # é…ç½®Gitç”¨æˆ·ä¿¡æ¯
          git config user.name "GitHub Actions Bot"
          git config user.email "actions@github.com"
          
          # æ£€æŸ¥gitçŠ¶æ€
          git status --porcelain
          if [ -n "$(git status --porcelain)" ]; then
            echo "ğŸ”„ æ£€æµ‹åˆ°æ–‡ä»¶å˜åŒ–ï¼Œéœ€è¦æäº¤"
            echo "changes_detected=true" >> $GITHUB_OUTPUT
            
            # æ˜¾ç¤ºå˜åŒ–è¯¦æƒ…
            echo "=== å˜åŒ–è¯¦æƒ… ==="
            git status -s
            echo "å˜åŒ–æ–‡ä»¶æ•°: $(git status -s | wc -l)"
          else
            echo "âœ… æ— æ–‡ä»¶å˜åŒ–ï¼Œæ— éœ€æäº¤"
            echo "changes_detected=false" >> $GITHUB_OUTPUT
          fi

      # 9. æ¨é€æ›´æ–°ï¼ˆå®¹é”™å¤„ç†ï¼Œä¿æŒåŸè¯­æ³•ï¼‰
      - name: ğŸ“¤ æ¨é€æ›´æ–°åˆ°ç›®æ ‡ä»“åº“
        if: env.CHANGES_DETECTED == 'true'
        run: |
          cd target_repo
          # äºŒæ¬¡ç¡®è®¤å˜æ›´ï¼ˆé¿å…ç©ºæäº¤ï¼‰
          if ! git status --porcelain | grep -q .; then
            echo "â„¹ï¸ æ— å®é™…å˜æ›´ï¼Œè·³è¿‡æäº¤"
            exit 0
          fi
          
          # é…ç½®Gitèº«ä»½
          git config user.name "Sync Bot"
          git config user.email "sync@noreply.github.com"
          git add . --force  # å¼ºåˆ¶æ·»åŠ æ–°å¢ç›®å½•/æ–‡ä»¶
          
          # ç”Ÿæˆæäº¤ä¿¡æ¯
          CURRENT_DATE=$(TZ='Asia/Shanghai' date +'%Y-%m-%d %H:%M:%S')
          SRC_INFO="${{ env.source_user }}/${{ env.source_repo }}:${{ env.source_branch }}[${{ inputs.source_folder || 'æ ¹ç›®å½•' }}]"
          TGT_INFO="${{ env.target_user }}/${{ env.target_repo }}:${{ env.target_branch }}[${{ inputs.target_folder || 'æ ¹ç›®å½•' }}]"
          
          if [ "${{ inputs.commit_template }}" = "ä»…æ—¶é—´" ]; then
            COMMIT_MSG="ğŸš€ ${CURRENT_DATE}"
          elif [ "${{ inputs.commit_template }}" = "åŒæ­¥è¯´æ˜" ]; then
            COMMIT_MSG="ğŸ”„ åŒæ­¥ï¼ˆæ—¶é—´æˆ³+å¤§å°æ ¡éªŒï¼‰ ${SRC_INFO} â†’ ${TGT_INFO}ï¼ˆ${CURRENT_DATE}ï¼‰"
          else
            COMMIT_MSG="${{ inputs.custom_commit_msg }}"
            [ -z "$COMMIT_MSG" ] && COMMIT_MSG="ğŸš€ ${CURRENT_DATE}"
          fi
          
          # æäº¤
          git commit -m "$COMMIT_MSG"
          
          # æ ¹æ®ç›®æ ‡å¹³å°é€‰æ‹©æ¨é€æ–¹å¼
          if [ "${{ github.event.inputs.target_platform }}" = "GitHub" ]; then
            # GitHubæ¨é€
            PUSH_URL="https://${{ secrets[env.target_token_name] }}@github.com/${{ env.target_user }}/${{ env.target_repo }}.git"
            if [ "${{ inputs.sync_strategy }}" = "è¦†ç›–" ]; then
              git push "$PUSH_URL" ${{ env.target_branch }} --force
            else
              git push "$PUSH_URL" ${{ env.target_branch }}
            fi
          else
            # Giteeæ¨é€
            TARGET_TOKEN="${{ secrets[env.target_token_name] }}"
            GITEE_URL="https://${{ env.target_user }}:$TARGET_TOKEN@gitee.com/${{ env.target_user }}/${{ env.target_repo }}.git"
            if [ "${{ inputs.sync_strategy }}" = "è¦†ç›–" ]; then
              echo "ğŸ”„ è¦†ç›–æ¨¡å¼ï¼Œä½¿ç”¨å¼ºåˆ¶æ¨é€åˆ°Gitee"
              git push "$GITEE_URL" HEAD:${{ env.target_branch }} --force
            else
              echo "ğŸ”„ å¢é‡æ¨¡å¼ï¼Œä½¿ç”¨æ™®é€šæ¨é€åˆ°Gitee"
              git push "$GITEE_URL" HEAD:${{ env.target_branch }}
            fi
          fi

      # 10. è¾“å‡ºåŒæ­¥ç»“æœï¼ˆä¿æŒåŸè¯­æ³•ï¼‰
      - name: ğŸ“Š åŒæ­¥ç»“æœæ±‡æ€»
        run: |
          if [ "$CHANGES_DETECTED" = "true" ]; then
            echo "âœ… åŒæ­¥å®Œæˆï¼"
            echo "ğŸ“Œ æºä»“åº“ï¼ˆ${{ github.event.inputs.source_platform }}ï¼‰ï¼š${{ env.source_user }}/${{ env.source_repo }}:${{ env.source_branch }}"
            echo "ğŸ“Œ ç›®æ ‡ä»“åº“ï¼ˆ${{ github.event.inputs.target_platform }}ï¼‰ï¼š${{ env.target_user }}/${{ env.target_repo }}:${{ env.target_branch }}"
            echo "ğŸ“Œ åŒæ­¥è·¯å¾„ï¼š${{ inputs.source_folder || 'æ ¹ç›®å½•' }} â†’ ${{ inputs.target_folder || 'æ ¹ç›®å½•' }}"
            echo "ğŸ“Œ åŒæ­¥ç­–ç•¥ï¼š${{ inputs.sync_strategy }}"
          else
            echo "â„¹ï¸ æºæ–‡ä»¶ä¸ç›®æ ‡æ–‡ä»¶å®Œå…¨ä¸€è‡´ï¼ˆæ—¶é—´æˆ³+å¤§å°åŒ¹é…ï¼‰ï¼Œæ— éœ€åŒæ­¥"
          fi

      # 11. å…¨å±€é”™è¯¯å¤„ç†ï¼ˆä¿æŒåŸè¯­æ³•ï¼‰
      - name: ğŸ” å…¨å±€å¼‚å¸¸å¤„ç†
        if: failure()
        run: |
          if [ "$CHANGES_DETECTED" = "false" ]; then
            echo "â„¹ï¸ æ— å˜æ›´ï¼Œæµç¨‹æ­£å¸¸ç»“æŸ"
            exit 0
          else
            echo "========================================"
            echo "âŒ åŒæ­¥å¤±è´¥ï¼Œè¯·æŸ¥çœ‹æ—¥å¿—æ’æŸ¥é—®é¢˜"
            echo "========================================"
            echo ""
            echo "å¸¸è§é—®é¢˜æ’æŸ¥:"
            echo ""
            echo "1. ğŸ”‘ Tokené—®é¢˜:"
            if [ "${{ github.event.inputs.source_platform }}" = "GitHub" ]; then
              echo "   - GitHubæºToken: ${{ inputs.source_token_name }}"
              echo "     è®¿é—®: https://github.com/settings/tokens"
              echo "     éœ€è¦æƒé™: repo"
            else
              echo "   - GiteeæºToken: ${{ inputs.source_token_name }}"
              echo "     è®¿é—®: https://gitee.com/profile/personal_access_tokens"
              echo "     éœ€è¦æƒé™: projects"
            fi
            echo ""
            if [ "${{ github.event.inputs.target_platform }}" = "GitHub" ]; then
              echo "   - GitHubç›®æ ‡Token: ${{ inputs.target_token_name }}"
              echo "     è®¿é—®: https://github.com/settings/tokens"
              echo "     éœ€è¦æƒé™: repo"
            else
              echo "   - Giteeç›®æ ‡Token: ${{ inputs.target_token_name }}"
              echo "     è®¿é—®: https://gitee.com/profile/personal_access_tokens"
              echo "     éœ€è¦æƒé™: projects"
            fi
            echo ""
            echo "2. ğŸ“¦ ä»“åº“æƒé™:"
            echo "   æºä»“åº“: ${{ env.source_user }}/${{ env.source_repo }}"
            echo "   ç›®æ ‡ä»“åº“: ${{ env.target_user }}/${{ env.target_repo }}"
            echo ""
            echo "3. ğŸŒ ç½‘ç»œé—®é¢˜:"
            echo "   æ£€æŸ¥GitHub Actionsç½‘ç»œè¿æ¥"
            echo "   ç¡®ä¿æ²¡æœ‰IPé™åˆ¶"
            echo ""
            echo "4. ğŸ“ è·¯å¾„é—®é¢˜:"
            echo "   æºæ–‡ä»¶å¤¹: ${{ inputs.source_folder || 'æ ¹ç›®å½•' }}"
            echo "   ç›®æ ‡æ–‡ä»¶å¤¹: ${{ inputs.target_folder || 'æ ¹ç›®å½•' }}"
            echo ""
            echo "ğŸ’¡ æç¤º: å¯ä»¥å°è¯•å…ˆæ‰‹åŠ¨åœ¨ç›®æ ‡å¹³å°åˆ›å»ºä»“åº“"
            echo "========================================"
            exit 1
          fi
